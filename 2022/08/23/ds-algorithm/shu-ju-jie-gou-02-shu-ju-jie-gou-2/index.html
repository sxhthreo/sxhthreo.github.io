<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta name="keywords" content="数据结构2:树与图, ShiQuLiZhi BLOG">
    <meta name="description" content="Record the study life of an ordinary college student">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>数据结构2:树与图 | ShiQuLiZhi BLOG</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 6.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


    
        <style>
    body{
       background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
       background-repeat:no-repeat;
       background-size:cover;
       background-attachment:fixed;
    }
</style>

            

                <body>

                    <!-- hexo-inject:begin --><!-- hexo-inject:end --><header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">ShiQuLiZhi BLOG</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/goodpapers" class="waves-effect waves-light">
      
      <i class="fas fa-coffee" style="zoom: 0.6;"></i>
      
      <span>收藏</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ShiQuLiZhi BLOG</div>
        <div class="logo-desc">
            
            Record the study life of an ordinary college student
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/goodpapers" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-coffee"></i>
			
			收藏
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

                        
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/10.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">数据结构2:树与图</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E7%AE%97%E6%B3%95/">
                                    <span class="chip bg-color">
                                        算法
                                    </span>
                                </a>
                                
                                <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                                    <span class="chip bg-color">
                                        数据结构
                                    </span>
                                </a>
                                
                        </div>
                        
                </div>
                <div class="col s5 right-align">
                    
                        <div class="post-cate">
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                                <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E8%AF%BE%E7%A8%8B/" class="post-category">
                                    数据结构与算法课程
                                </a>
                                
                        </div>
                        
                </div>
            </div>

            <div class="post-info">
                
                    <div class="post-date info-break-policy">
                        <i class="far fa-calendar-minus fa-fw"></i>
                        发布日期:&nbsp;&nbsp;
                            2022-08-23
                    </div>
                    

                        
                            <div class="post-date info-break-policy">
                                <i class="far fa-calendar-check fa-fw"></i>
                                更新日期:&nbsp;&nbsp;
                                    2023-03-03
                            </div>
                            

                                
                                    <div class="info-break-policy">
                                        <i class="far fa-file-word fa-fw"></i>
                                        文章字数:&nbsp;&nbsp;
                                            12.1k
                                    </div>
                                    

                                        
                                            <div class="info-break-policy">
                                                <i class="far fa-clock fa-fw"></i>
                                                阅读时长:&nbsp;&nbsp;
                                                    51
                                                        分
                                            </div>
                                            

                                                
            </div>
        </div>
        <hr class="clearfix">

        
            <!-- 是否加载使用自带的 prismjs. -->
            <link rel="stylesheet" href="/libs/prism/prism.css">
            

                
                    <!-- 代码块折行 -->
                    <style type="text/css">
                        code[class*="language-"],
                        pre[class*="language-"] {
                            white-space: pre-wrap !important;
                        }
                    </style>
                    

                        <div class="card-content article-card-content">
                            <div id="articleContent">
                                <h1 id="ch6-树"><a href="#ch6-树" class="headerlink" title="ch6.树"></a>ch6.树</h1><p>非线性数据结构主要有集中式、分散式、集散式等。树型结构是一类重要的<strong>非线性数据结构</strong>。</p>
<p>树的<strong>递归定义—–&gt;算法递归</strong></p>
<ul>
<li>at least one base（<strong>出口条件</strong>）</li>
<li>recursive case（<strong>递归情况</strong>）：往base case走</li>
</ul>
<h2 id="6-1-树的定义及基本术语"><a href="#6-1-树的定义及基本术语" class="headerlink" title="6.1 树的定义及基本术语"></a>6.1 树的定义及基本术语</h2><p><strong>树的定义</strong>：</p>
<p>树是n（n大于等于0）个结点的有限集合。在任意一棵非空树中应满足：</p>
<p>（1）有且仅有一个特定的称为根的结点。</p>
<p>（2）当n大于1时，其余结点可分为m个<strong>互不相交</strong>的有限集合${T_{1},T_{2},…,T_{m}}$，其中每个集合本身又是一棵树，并且称为根结点的<strong>子树</strong>。</p>
<p><strong>基本术语</strong>：</p>
<ul>
<li><p>树的<strong>结点</strong>包含一个数据元素及若干指向其子树的分支</p>
</li>
<li><p>结点拥有的<strong>子树数</strong>称为<strong>结点的度</strong>（degree）</p>
</li>
<li><p>结点的<strong>深度（depth）</strong>是指<strong>从根结点到此结点的长度</strong></p>
</li>
<li><p>结点的<strong>高度（height）</strong>是指<strong>从此结点到最深结点（the deepest leaf）的长度</strong></p>
</li>
<li><p>结点的<strong>层次（level）</strong>等于父结点的层次+1，基情况国内定义为1，<code>level=depth</code>。</p>
</li>
<li><p>假设有一度为m的树，则称其为<strong>m-ary(叉) tree</strong>。</p>
<p>【区分】：</p>
<p>树的度（度为m的树）：各结点的度的最大值，任意结点的度小于等于m，至少有一个结点度&#x3D;m（有m个孩子），且该树至少有m+1个结点。</p>
<p>m叉树：每个结点最多只能有m个孩子的树，允许所有结点的度都小于m，且可以是空树。</p>
</li>
<li><p>二叉树是一种特殊的树形结构，它的树型要么为<strong>空</strong>（empty），要么存在<strong>3个disjoint（不相交）的subsets（子集）</strong>【分别为root、左子树、右子树】。在严格二叉树中，若存在$n$个叶子结点（leaves），则存在$2n-1$个总结点数。</p>
</li>
</ul>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220416004838593.png" alt="image-20220416004838593"></p>
<p><strong>二叉排序树</strong>：</p>
<p>一个二叉树或是空二叉树，是具有以下性质的二叉树：</p>
<p>左子树上所有结点的关键字均小于根节点的关键字；右子树上所有结点的关键字均大于根节点的关键字。</p>
<p>左子树和右子树又各是一棵二叉排序树。</p>
<p><strong>平衡二叉树</strong>：</p>
<p>树上任一结点的<strong>左子树</strong>和<strong>右子树</strong>的深度之差不超过1。平衡二叉树是“胖胖的、丰满的树”，能有更高的搜索效率。</p>
<h2 id="6-2-二叉树的性质"><a href="#6-2-二叉树的性质" class="headerlink" title="6.2 二叉树的性质"></a>6.2 二叉树的性质</h2><ul>
<li><p>二叉树中，<strong>结点数&#x3D;总度数+1</strong>；对于任意一棵二叉树T，若其终端结点数为$n_{0}$，度为2的结点数为$n_{2}$，则$n_{0}&#x3D;n_{2}+1$.</p>
</li>
<li><p>在二叉树的第i层上至多有$2^{i-1}$个结点（n叉则为$n^{i-1}$），深度为k的二叉树至多有$2^{k}-1$个结点。</p>
</li>
</ul>
<p>​		**[推广]**高度为h的m叉树至多有$\frac{m^{h} - 1}{m - 1}$个结点。（第一层最多m的0次，第二层m的1次，第三层m的2次，进行等比数列求和）</p>
<h2 id="6-3-二叉树的存储结构"><a href="#6-3-二叉树的存储结构" class="headerlink" title="6.3 二叉树的存储结构"></a>6.3 二叉树的存储结构</h2><h3 id="6-3-1-顺序存储"><a href="#6-3-1-顺序存储" class="headerlink" title="6.3.1 顺序存储"></a>6.3.1 顺序存储</h3><p><strong>法1</strong>：用一组地址连续的存储单元依次自上而下、自左至右存储完全二叉树上的结点元素。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MaxSize</span> <span class="token expression"><span class="token number">100</span></span></span>
<span class="token keyword">struct</span> <span class="token class-name">TreeNode</span><span class="token punctuation">&#123;</span>
    ElemType value<span class="token punctuation">;</span>		<span class="token comment">//结点中的数据元素</span>
    bool isEmpty<span class="token punctuation">;</span>		<span class="token comment">//结点是否为空</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>定义一个长度为<code>MaxSize</code>的数组t：<code>TreeNode t[MaxSize]</code>，按照从上至下、从左至右的顺序依次存储完全二叉树中的各个结点。初始化时利用循环将所有结点标记为空：<code>t[i].isEmpty=true;</code></p>
<p>二叉树的顺序存储中，要把二叉树的结点编号与完全二叉树对应起来。最坏情况是：高度为h且只有h个结点的单支树（所有结点只有右孩子），也至少需要$2^{h} - 1$个存储单元。这种顺序存储方式只适合存储完全二叉树。</p>
<p>注：顺序存储结构若需判空，则一般设置一个<strong>长度length变量</strong>，存储当前存储了多少结点。</p>
<p><strong>法2</strong>：定义结点类型，存储数据data和它在完全二叉树中的编号，定义树使用结构体数组。</p>
<table>
<thead>
<tr>
<th align="center">data</th>
<th align="center">No.</th>
</tr>
</thead>
</table>
<p><strong>法3</strong>：定义结点类型，存储数据<code>data</code>、它双亲的编号以及一个变量<code>LR</code>标记它是左孩子还是右孩子，定义树使用结构体数组。</p>
<table>
<thead>
<tr>
<th align="center">data</th>
<th align="center">parent</th>
<th align="center">LR(孩子)</th>
</tr>
</thead>
</table>
<h3 id="6-3-2-链式存储"><a href="#6-3-2-链式存储" class="headerlink" title="6.3.2 链式存储"></a>6.3.2 链式存储</h3><p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220416100943431.png" alt="image-20220416100943431"></p>
<p>​																																						三叉链表增设<code>parent</code>指针</p>
<p><strong>在n个结点的二叉链表共有n+1个空链域</strong>。</p>
<p>[推导]在含有<code>n</code>个结点的二叉链表中，链域一共有<code>2*n</code>个（每个点有两个链域），而除根结点以外，其余结点均有前驱，则有<code>n-1</code>个前驱，即一共有<code>n-1</code>个指针指向某个结点，故在<code>n</code>个结点的二叉链表共有<code>n+1</code>个空链域。（空链域可用于构造线索二叉树）</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">BiTNode</span>
<span class="token punctuation">&#123;</span>
    ElemType data<span class="token punctuation">;</span>						<span class="token comment">//数据域</span>
    <span class="token keyword">struct</span> <span class="token class-name">BiTNode</span> <span class="token operator">*</span>lchild<span class="token punctuation">,</span><span class="token operator">*</span>rchild<span class="token punctuation">;</span>		<span class="token comment">//左、右孩子指针</span>
<span class="token punctuation">&#125;</span>BiTNode<span class="token punctuation">,</span><span class="token operator">*</span>BiTree<span class="token punctuation">;</span>
<span class="token comment">//定义一棵空树</span>
BiTree root<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token comment">//插入根结点</span>
root<span class="token operator">=</span> <span class="token punctuation">(</span>BiTree<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>BiTNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token operator">-></span>data<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
root<span class="token operator">-></span>lchild<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
root<span class="token operator">-></span>rchild<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token comment">//插入新结点</span>
BiTNode <span class="token operator">*</span>p<span class="token operator">=</span> <span class="token punctuation">(</span>BiTNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>BiTNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token operator">-></span>data<span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
p<span class="token operator">-></span>lchild<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
p<span class="token operator">-></span>rchild<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
root<span class="token operator">-></span>lchild<span class="token operator">=</span>p<span class="token punctuation">;</span>		<span class="token comment">//作为根结点的左孩子</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="6-3-3-静态链表方式存储"><a href="#6-3-3-静态链表方式存储" class="headerlink" title="6.3.3 静态链表方式存储"></a>6.3.3 静态链表方式存储</h3><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220416102637385.png" alt="image-20220416102637385" style="zoom: 50%;" />

<h2 id="6-4-二叉树的遍历"><a href="#6-4-二叉树的遍历" class="headerlink" title="6.4 二叉树的遍历"></a>6.4 二叉树的遍历</h2><h3 id="6-4-1-先中后序遍历"><a href="#6-4-1-先中后序遍历" class="headerlink" title="6.4.1 先中后序遍历"></a>6.4.1 先中后序遍历</h3><p><strong>根结点</strong>集合仅1个元素，以此划分为：</p>
<p>先序遍历：<strong>根</strong>左右（<strong>N</strong>LR）							中序遍历：左<strong>根</strong>右（L<strong>N</strong>R）							后序遍历：左右<strong>根</strong>（LR<strong>N</strong>）</p>
<p>以先序遍历为例：</p>
<ul>
<li>非空：<strong>访问根</strong>，遍历左子树，遍历右子树</li>
<li>为空：返回</li>
</ul>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Preorder</span><span class="token punctuation">(</span>BiTNode <span class="token operator">*</span>bt<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>bt<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span>
   <span class="token punctuation">&#123;</span>  
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span>bt<span class="token operator">-></span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">Preorder</span><span class="token punctuation">(</span>bt<span class="token operator">-></span>lchild<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">Preorder</span><span class="token punctuation">(</span>bt<span class="token operator">-></span>rchild<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220416102206931.png" alt="image-20220416102206931" style="zoom:50%;" />

<p>中序遍历的<strong>非递归方式</strong>：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Inorder</span><span class="token punctuation">(</span>BiTNode <span class="token operator">*</span>bt<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>   
    <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    BiTNode <span class="token operator">*</span>p<span class="token punctuation">,</span><span class="token operator">*</span>s<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">;</span>
    p<span class="token operator">=</span>bt<span class="token punctuation">;</span>
    <span class="token keyword">do</span>
    <span class="token punctuation">&#123;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span>
       <span class="token punctuation">&#123;</span>   s<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>p<span class="token punctuation">;</span>
           p<span class="token operator">=</span>p<span class="token operator">-></span>lchild<span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span>
       <span class="token punctuation">&#123;</span>   p<span class="token operator">=</span>s<span class="token punctuation">[</span><span class="token operator">--</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
           <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span>p<span class="token operator">-></span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
           p<span class="token operator">=</span>p<span class="token operator">-></span>rchild<span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span><span class="token operator">||</span>p<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>[注]</p>
<ul>
<li>若<strong>先序与中序的序列相同</strong>，则有V<strong>L</strong>R&#x3D;<strong>L</strong>VR，则VR&#x3D;VR，仅有右子树，没有左子树。下面有各种情况的总结。</li>
<li>已知两种序列（需包括中序序列）可以唯一确定二叉树的形态，根据根的位置先划清界限，然后进行判断即可。</li>
</ul>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220427002719483.png" alt="image-20220427002719483" style="zoom: 50%;" />

<ul>
<li><p>树的深度：<strong>后序遍历</strong>，取左子树、右子树的最大深度+1。</p>
</li>
<li><p><strong>表达式树</strong>（Expression Tree）：用于表示一种树状的数据结构，树上的每一个节点都表示为某种<strong>表达式类型</strong>，如图：</p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220422220849583.png" alt="image-20220422220849583" style="zoom:33%;" /></li>
</ul>
<blockquote>
<p><strong>遍历序列的一些总结</strong>：</p>
<p>一、前序序列与后序序列<br>1.前序序列和后序序列相同—-&gt;<strong>空树或者只有根节点的二叉树。</strong></p>
<p>2.前序序列和后序序列相反<br>(1)当且仅当二叉树中只有一个叶子节点。<br>(2)二叉树的高度和其节点个数相同。</p>
<p>二、前序序列与中序序列<br>1.前序序列和中序序列相同<br><strong>空树或缺左子树的单支二叉树。</strong></p>
<p>2.前序序列和中序序列相反<br>(1)二叉树为空或者只有一个节点。<br>(2)若二叉树不为空，则任意节点不能同时用于左孩子和右孩子。<br>(3)若二叉树不为空，则任意节点没有右孩子。</p>
<p>三、中序序列与后序序列<br>1.中序序列和后序序列相同<br><strong>空树或者缺右子树的单支二叉树。</strong></p>
<p>2.中序序列和后序序列相反<br>任意节点没有左孩子节点。</p>
</blockquote>
<h3 id="6-4-2-层序遍历"><a href="#6-4-2-层序遍历" class="headerlink" title="6.4.2 层序遍历"></a>6.4.2 层序遍历</h3><p>采用<strong>先进先出</strong>的方式，故采用<strong>队列</strong>这一数据结构。</p>
<p>&#x3D;&#x3D;<strong>算法模式</strong>&#x3D;&#x3D;：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">PrintLevelOrder</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>   
     <span class="token function">InitQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">Enqueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">//将根结点入队</span>
     <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>Q<span class="token punctuation">.</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
         t <span class="token operator">=</span> <span class="token function">DeQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">//或DeQueue(Q,t);将队首元素出队</span>
         <span class="token function">visit</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">//访问该结点</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">-></span>lchild<span class="token punctuation">)</span>	 <span class="token function">EnQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span>t<span class="token operator">-></span>lchild<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">-></span>rchild<span class="token punctuation">)</span>	 <span class="token function">EnQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span>t<span class="token operator">-></span>rchild<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>     
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>层序求树的高度</strong>，则关键问题是知道每层的最后一个结点（可以通过前层最后一个入队的孩子获取）。</p>
<p>[例]翻转二叉树。</p>
<p>从根节点开始，左右孩子交换，然后递归</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">TreeNode</span> <span class="token function">invertTree</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">//从上往下递归交换（左右交换）</span>
    <span class="token class-name">TreeNode</span> plate <span class="token operator">=</span> root<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    root<span class="token punctuation">.</span>left <span class="token operator">=</span> root<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    root<span class="token punctuation">.</span>right <span class="token operator">=</span> plate<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token function">invertTree</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token function">invertTree</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> root<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>求树高</strong>：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">Hight</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">)</span>	<span class="token comment">// 递归</span>
<span class="token punctuation">&#123;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">Hight</span><span class="token punctuation">(</span>root<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Hight</span><span class="token punctuation">(</span>root<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-5-线索二叉树"><a href="#6-5-线索二叉树" class="headerlink" title="6.5 线索二叉树"></a>6.5 线索二叉树</h2><p>线索是一种对二叉树的操作，意思是对二叉树<strong>进行线索化</strong>，其目的是使线索化后的二叉树具有<strong>方便被遍历</strong>的特点，即<strong>不使用递归和栈也可以对线索化之后的树进行中序遍历</strong>。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220207152838458.png" alt="image-20220207152838458"></p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220422221204045.png" alt="image-20220422221204045" style="zoom:50%;" />

<p>线索指向的是该序的前驱&#x2F;后继。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c">BiTNode <span class="token operator">*</span><span class="token function">zxxsh</span><span class="token punctuation">(</span>BiTNode <span class="token operator">*</span>bt<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
   BiTNode <span class="token operator">*</span>p<span class="token punctuation">,</span><span class="token operator">*</span>pr<span class="token punctuation">,</span><span class="token operator">*</span>s<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span>t<span class="token punctuation">;</span>
   <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
   t<span class="token operator">=</span><span class="token punctuation">(</span>BiTNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>BiTNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   t<span class="token operator">-></span>leftthread<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> t<span class="token operator">-></span>rightthread<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>   t<span class="token operator">-></span>rc<span class="token operator">=</span>t<span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>bt<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>       t<span class="token operator">-></span>lc<span class="token operator">=</span>t<span class="token punctuation">;</span>
   <span class="token keyword">else</span>
   <span class="token punctuation">&#123;</span>  t<span class="token operator">-></span>lc<span class="token operator">=</span>bt<span class="token punctuation">;</span>  pr<span class="token operator">=</span>t<span class="token punctuation">;</span>   p<span class="token operator">=</span>bt<span class="token punctuation">;</span>
      <span class="token keyword">do</span><span class="token punctuation">&#123;</span>   <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>   s<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>p<span class="token punctuation">;</span>  p<span class="token operator">=</span>p<span class="token operator">-></span>lc<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>
	  <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span>
	  <span class="token punctuation">&#123;</span>   p<span class="token operator">=</span>s<span class="token punctuation">[</span><span class="token operator">--</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c  "</span><span class="token punctuation">,</span>p<span class="token operator">-></span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	      <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">-></span>lc<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>
	      <span class="token punctuation">&#123;</span>   p<span class="token operator">-></span>leftthread<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>  p<span class="token operator">-></span>lc<span class="token operator">=</span>pr<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
	      <span class="token keyword">if</span><span class="token punctuation">(</span>pr<span class="token operator">-></span>rc<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span>
	      <span class="token punctuation">&#123;</span>   pr<span class="token operator">-></span>rightthread<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> pr<span class="token operator">-></span>rc<span class="token operator">=</span>p<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
	      pr<span class="token operator">=</span>p<span class="token punctuation">;</span>    p<span class="token operator">=</span>p<span class="token operator">-></span>rc<span class="token punctuation">;</span>
	  <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">></span><span class="token number">0</span><span class="token operator">||</span>p<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      pr<span class="token operator">-></span>rc<span class="token operator">=</span>t<span class="token punctuation">;</span> pr<span class="token operator">-></span>rightthread<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>  t<span class="token operator">-></span>rc<span class="token operator">=</span>pr<span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
   <span class="token keyword">return</span> t<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>&#x3D;&#x3D;在中序线索二叉树中<strong>找结点后继</strong>的方法&#x3D;&#x3D;：</p>
<p>（1）若rt&#x3D;1, 则rc域直接指向其后继</p>
<p>（2）若rt&#x3D;0, 则结点的后继应是其右子树的左链尾（lt&#x3D;1)的结点</p>
<p>&#x3D;&#x3D;在中序线索二叉树中<strong>找结点前驱</strong>的方法&#x3D;&#x3D;：</p>
<p>（1）若lt&#x3D;1, 则lc域直接指向其前驱</p>
<p>（2）若lt&#x3D;0, 则结点的前驱应是其左子树的右链尾（rt&#x3D;1)的结点</p>
<p>在线索树上进行<strong>遍历</strong>，只要先找到序列中的第一个结点，然后一次找结点后继，直至后继为空：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c">BiTNode <span class="token function">PreInThread</span><span class="token punctuation">(</span>P<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">-></span>ltag<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> p<span class="token operator">-></span>lc<span class="token punctuation">;</span>
    <span class="token keyword">else</span><span class="token punctuation">&#123;</span>
        q <span class="token operator">=</span> p<span class="token operator">-></span>lc<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>q<span class="token operator">-></span>rtag<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            q<span class="token operator">=</span>q<span class="token operator">-></span>rc<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> q<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>下面详细介绍<strong>线索二叉树找前驱&#x2F;后继</strong>的方法：</p>
<p><strong>1.中序线索二叉树</strong></p>
<p>中序遍找历中序后继：</p>
<p>​				   左	根	<strong>右</strong></p>
<p>​				   左	根	(<strong>左</strong>	根	右)</p>
<p>​				   左	根	(<strong>左</strong>	根	右)	根	右)</p>
<p>在中序线索二叉树中找到指定结点*p的中序后继next：</p>
<p>（1）若p-&gt;rtag&#x3D;&#x3D;1，则next&#x3D;p-&gt;rchild；</p>
<p>（2）若p-&gt;rtag&#x3D;&#x3D;0，则p必有有孩子。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//找到以p为根的子树中，第一个被中序遍历的结点</span>
ThreadNode <span class="token operator">*</span><span class="token function">Firstnode</span><span class="token punctuation">(</span>ThreadNode <span class="token operator">*</span>p<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">//循环找到最左下结点（不一定是叶结点）</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">-></span>ltag<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> p<span class="token operator">=</span>p<span class="token operator">-></span>lchild<span class="token punctuation">;</span>
    <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//在中序线索二叉树中找到结点p的后继结点</span>
ThreadNode <span class="token operator">*</span><span class="token function">NextNode</span><span class="token punctuation">(</span>ThreadNode <span class="token operator">*</span>p<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">-></span>rtag<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">Firstnode</span><span class="token punctuation">(</span>p<span class="token operator">-></span>rchild<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">return</span> p<span class="token operator">-></span>rchild<span class="token punctuation">;</span>		<span class="token comment">//rtag==1直接返回后继线索</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//对中序线索二叉树进行中序遍历（利用线索实现的非递归算法）</span>
<span class="token keyword">void</span> <span class="token function">Inorder</span><span class="token punctuation">(</span>ThreadNode <span class="token operator">*</span>T<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>ThreadNode <span class="token operator">*</span>p<span class="token operator">=</span><span class="token function">FirstNode</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>p<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>p<span class="token operator">=</span><span class="token function">NextNode</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>
    	<span class="token function">visit</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>2.先序线索二叉树</strong></p>
<p>先序遍历找先序后继：（假设有左孩子）</p>
<p>​				   根	<strong>左</strong>	右</p>
<p>​				   根	(<strong>根</strong>	左	右)	右</p>
<p>[<strong>结论</strong>]若p有左孩子，则先序后继为左孩子。</p>
<p>（假设没有左孩子）</p>
<p>​				   根	<strong>右</strong></p>
<p>​				   根	(<strong>根</strong>	左	右)</p>
<p>[<strong>结论</strong>]若p有右孩子，则先序后继为右孩子。</p>
<p>在中序线索二叉树中找到指定结点*p的先序后继next：</p>
<p>（1）若p-&gt;rtag&#x3D;&#x3D;1，则next&#x3D;p-&gt;rchild</p>
<p>（2）若p-&gt;rtag&#x3D;&#x3D;0，则p必有右孩子。</p>
<p><strong>（仅改用三叉链表或从根开始遍历寻找才能完成）</strong></p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220207163326461.png" alt="image-20220207163326461"></p>
<p><strong>3.后序线索二叉树</strong></p>
<p>后序遍历找后序前驱：（假设有右孩子）</p>
<p>​				   左	<strong>右</strong>	根</p>
<p>​				   左	(左   <strong>右</strong>   根)	根</p>
<p>[<strong>结论</strong>]若p有右孩子，则后序前驱为左孩子。</p>
<p>（假设没有右孩子）</p>
<p>​				   左	<strong>根</strong></p>
<p>​				   (左   <strong>右</strong>   根)	根</p>
<p>[<strong>结论</strong>]若p没有右孩子，则后序前驱为左孩子。</p>
<p>在中序线索二叉树中找到指定结点*p的后续前驱next：</p>
<p>（1）若p-&gt;ltag&#x3D;&#x3D;1，则next&#x3D;p-&gt;lchild</p>
<p>（2）若p-&gt;ltag&#x3D;&#x3D;0，则p必有左孩子。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220207164018118.png" alt="image-20220207164018118"></p>
<h2 id="6-6-哈夫曼树"><a href="#6-6-哈夫曼树" class="headerlink" title="6.6 哈夫曼树"></a>6.6 哈夫曼树</h2><p>编码方式：流水号、前缀码、<strong>定长码</strong>（fixed-length）、<strong>变长码</strong>（variable-length）[<strong>使用频率高，码长短</strong>]。</p>
<h3 id="6-6-1-哈夫曼树的定义及特点"><a href="#6-6-1-哈夫曼树的定义及特点" class="headerlink" title="6.6.1 哈夫曼树的定义及特点"></a>6.6.1 哈夫曼树的定义及特点</h3><p>结点的权：有某些现实含义的数值；</p>
<p>结点的带权路径长度(<strong>WPL</strong>)：从树的根到该结点的路径长度（经过的边数）与该结点上权值的乘积。</p>
<p>在含有n个带权叶结点的二叉树中，带权路径长度(WPL)最小的二叉树称为哈夫曼树，也称最优二叉树。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220208114559064.png" alt="image-20220208114559064"></p>
<p><strong>哈夫曼树的特点</strong>：</p>
<ul>
<li><p>每个初始结点最终都成为叶结点，且权值越小的结点到根结点的路径长度越大</p>
</li>
<li><p><strong>哈夫曼树有$2n-1$个结点</strong>，它是<strong>严格二叉树</strong>，不存在度为1的结点</p>
</li>
<li><p>哈夫曼树<strong>形态不唯一</strong>，但WPL必然相同且为最优</p>
</li>
</ul>
<h3 id="6-6-2-哈夫曼算法"><a href="#6-6-2-哈夫曼算法" class="headerlink" title="6.6.2 哈夫曼算法"></a>6.6.2 哈夫曼算法</h3><p>给定n个权值分别为$w_{1}, w_{2},…, w_{n}$的结点，<strong>构造哈夫曼树的算法</strong>（&#x3D;&#x3D;<strong>哈夫曼算法</strong>&#x3D;&#x3D;）描述如下：</p>
<ul>
<li>给定N个子树，初始化声明集合$F&#x3D;\left { T_{1},T_{2},……,T_{n} \right } $（<strong>仅含根结点且带权值</strong>）</li>
<li>从F中选<strong>根结点权值最小的两棵树</strong>$T_{i},T_{j}$作为左右子树构造一棵新的二叉树S，有：<ul>
<li>$S\rightarrow lc \Leftarrow T_{i}$</li>
<li>$S\rightarrow rc \Leftarrow T_{j}$</li>
<li>新二叉树<strong>根结点的权值</strong>：$W_{S}&#x3D;W_{T_{i}}+W_{T_{j}}$</li>
</ul>
</li>
<li>在$F$中删除$T_{i},T_{j}$，同时将新得到的二叉树$S$加入$F$中</li>
<li>重复2-3步，直到$F$中只有一棵子树。</li>
</ul>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220422224754216.png" alt="image-20220422224754216" style="zoom: 50%;" />

<p>存储结构：**问题规模已知—&gt;&#x3D;&#x3D;静态链表&#x3D;&#x3D;**。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> weight<span class="token punctuation">;</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span>lc<span class="token punctuation">,</span>rc<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>HTNode<span class="token punctuation">,</span><span class="token operator">*</span>HuffmanTree<span class="token punctuation">;</span>			<span class="token comment">//动态分配数组存储哈夫曼树</span>
<span class="token keyword">typedef</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span> HuffmanCode<span class="token punctuation">;</span>	<span class="token comment">//动态分配数组存储哈夫曼编码表</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220426232551287.png" alt="image-20220426232551287" style="zoom:50%;" />

<p>遍历使用“<strong>栈</strong>”这一数据结构。</p>
<h2 id="6-7-哈夫曼编码"><a href="#6-7-哈夫曼编码" class="headerlink" title="6.7 哈夫曼编码"></a>6.7 哈夫曼编码</h2><p>可变长度编码：允许对不同字符用<strong>不等长的二进制位</strong>表示（使得总编码长度尽量减少）。</p>
<p><strong>前缀编码</strong>必须保证任意一个字符的编码都不是另一个字符的编码的前缀，可以利用二叉树来设计二进制的前缀编码。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220208120601782.png" alt="image-20220208120601782"></p>
<p>求哈夫曼编码的算法代码实现如下：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">HuffmanCoding</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>HT<span class="token punctuation">,</span> <span class="token operator">&amp;</span>HC<span class="token punctuation">,</span> w<span class="token punctuation">,</span> n<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token punctuation">;</span>
    m <span class="token operator">=</span> <span class="token number">2</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    HT <span class="token operator">=</span> <span class="token punctuation">(</span>HuffmanTree<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>HTNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>p <span class="token operator">=</span> HT<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> <span class="token operator">++</span>p<span class="token punctuation">,</span> <span class="token operator">++</span>w<span class="token punctuation">)</span>
        <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token operator">*</span>w<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> <span class="token operator">++</span>p<span class="token punctuation">)</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>		<span class="token comment">//建立哈夫曼树</span>
       <span class="token comment">//将产生n-1个中间结点</span>
        <span class="token function">select</span><span class="token punctuation">(</span>HT<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//在HT[1,…,i-1]中选择parent为0且weight最小的两个结点</span>
        HT<span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> i<span class="token punctuation">;</span> HT<span class="token punctuation">[</span>s2<span class="token punctuation">]</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> i<span class="token punctuation">;</span>
        HT<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lc <span class="token operator">=</span> s1<span class="token punctuation">;</span> HT<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>rc <span class="token operator">=</span> s2<span class="token punctuation">;</span>
        HT<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>weight <span class="token operator">=</span> HT<span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token punctuation">.</span>weight <span class="token operator">+</span> HT<span class="token punctuation">[</span>s2<span class="token punctuation">]</span><span class="token punctuation">.</span>weight<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">//从叶子到根逆向求每个字符的哈夫曼编码</span>
    HC <span class="token operator">=</span> <span class="token punctuation">(</span>HuffmanCode<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cd <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>n <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cd<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        start <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>c <span class="token operator">=</span> i<span class="token punctuation">,</span> f <span class="token operator">=</span> HT<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>parent<span class="token punctuation">;</span> f <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">=</span> f<span class="token punctuation">,</span> f <span class="token operator">=</span> HT<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>parent<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token comment">//从叶子到根逆向求编码，f!=0判断是否到达根节点</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>HT<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>lc <span class="token operator">==</span> c<span class="token punctuation">)</span> cd<span class="token punctuation">[</span><span class="token operator">--</span>start<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'0'</span><span class="token punctuation">;</span>
            	<span class="token keyword">else</span> cd<span class="token punctuation">[</span><span class="token operator">--</span>start<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'1'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        HC<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//为i个字符的编码分配空间</span>
        <span class="token function">strcpy</span><span class="token punctuation">(</span>HC<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>cd<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//从cd复制编码串到HC</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">free</span><span class="token punctuation">(</span>cd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-8-树的存储结构"><a href="#6-8-树的存储结构" class="headerlink" title="6.8 树的存储结构"></a>6.8 树的存储结构</h2><h3 id="6-8-1-双亲表示法"><a href="#6-8-1-双亲表示法" class="headerlink" title="6.8.1 双亲表示法"></a>6.8.1 双亲表示法</h3><p>箭头向上指，<strong>每个结点保存指向双亲的指针</strong>。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220207165231551.png" alt="双亲表示法"></p>
<h3 id="6-8-2-孩子表示法"><a href="#6-8-2-孩子表示法" class="headerlink" title="6.8.2 孩子表示法"></a>6.8.2 孩子表示法</h3><p>顺序存储各个节点，每个节点中保存孩子的链表头指针</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220426233748263.png" alt="image-20220426233748263"></p>
<p>​														<strong>孩子链表</strong>																						<strong>带双亲的孩子链表</strong></p>
<p>存储结构：</p>
<table>
<thead>
<tr>
<th align="center">data</th>
<th align="center">child1</th>
<th align="center">child2</th>
<th align="center">child3</th>
<th align="center">……</th>
<th align="center">child d</th>
</tr>
</thead>
</table>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220207165325823.png" alt="image-20220207165325823"></p>
<h3 id="6-8-3-孩子兄弟表示法"><a href="#6-8-3-孩子兄弟表示法" class="headerlink" title="6.8.3 孩子兄弟表示法"></a>6.8.3 孩子兄弟表示法</h3><p>存储结构：</p>
<table>
<thead>
<tr>
<th align="center">data</th>
<th align="center">firstchild</th>
<th align="center">nextSibling</th>
</tr>
</thead>
</table>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220426234658871.png" alt="image-20220426234658871"></p>
<p>该存储结构便于实现很多树的操作，如易于实现找结点孩子的操作，如访问结点<code>x</code>的第<code>i</code>个孩子，只要先从<code>firstchild</code>域找到第1个孩子，然后沿着<code>nextsibling</code>域连续走<code>i-1</code>步，即可找到<code>x</code>的第<code>i</code>个孩子。</p>
<h2 id="6-9-树的转换与遍历"><a href="#6-9-树的转换与遍历" class="headerlink" title="6.9 树的转换与遍历"></a>6.9 树的转换与遍历</h2><h3 id="6-9-1-树与二叉树的转换"><a href="#6-9-1-树与二叉树的转换" class="headerlink" title="6.9.1 树与二叉树的转换"></a>6.9.1 树与二叉树的转换</h3><p><strong>将树转换成二叉树</strong>：</p>
<ul>
<li>加线：在兄弟之间加一连线</li>
<li>抹线：对每个结点，除了其左孩子外，去除其与其余孩子之间的关系</li>
<li>旋转：以树的根结点为轴心，将整树顺时针转45°</li>
</ul>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220427000934557.png" alt="image-20220427000934557"></p>
<p><strong>将二叉树转换成树</strong>：</p>
<ul>
<li>加线：若p结点是双亲结点的左孩子，则将p的右孩子，右孩子的右孩子，……沿分支找到的所有右孩子，都与p的双亲用线连起来</li>
<li>抹线：抹掉原二叉树中双亲与右孩子之间的连线</li>
<li>调整：将结点按层次排列，形成树结构</li>
</ul>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220427000917361.png" alt="image-20220427000917361"></p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220426235427469.png" alt="树与二叉树的转换"></p>
<h3 id="6-9-2-树的遍历"><a href="#6-9-2-树的遍历" class="headerlink" title="6.9.2 树的遍历"></a>6.9.2 树的遍历</h3><ul>
<li><strong>先根遍历</strong>：先访问树的根结点，然后依次先根遍历根的每棵子树——-&gt;<strong>对应二叉树的先序遍历</strong></li>
<li><strong>后根遍历</strong>：先依次后根遍历每棵子树，然后访问根结点——-&gt;<strong>对应二叉树的中序遍历</strong></li>
<li><strong>按层次遍历</strong>：先访问第一层上的结点，然后依次遍历第二层，……，第n层的结点</li>
</ul>
<h3 id="6-9-3-树与森林的转换"><a href="#6-9-3-树与森林的转换" class="headerlink" title="6.9.3 树与森林的转换"></a>6.9.3 树与森林的转换</h3><p><strong>森林转换成二叉树</strong>：</p>
<ul>
<li>将各棵树分别转换成二叉树</li>
<li>将每棵树的根结点用线相连</li>
<li>以第一棵树根结点为二叉树的根，再以根结点为轴心，顺时针旋转，构成二叉树型结构</li>
</ul>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220427001119915.png" alt="image-20220427001119915" style="zoom:67%;" />

<p><strong>二叉树转换成森林</strong>：</p>
<ul>
<li>抹线：<strong>将二叉树中根结点与其右孩子连线，及沿右分支搜索到的所有右孩子间连线全部抹掉</strong>，使之变成孤立的二叉树</li>
<li>还原：将孤立的二叉树还原成树</li>
</ul>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220427001206108.png" alt="image-20220427001206108" style="zoom:67%;" />

<h1 id="ch7-图"><a href="#ch7-图" class="headerlink" title="ch7.图"></a>ch7.图</h1><h2 id="7-1-图的相关术语"><a href="#7-1-图的相关术语" class="headerlink" title="7.1 图的相关术语"></a>7.1 图的相关术语</h2><h3 id="7-1-1-图的定义"><a href="#7-1-1-图的定义" class="headerlink" title="7.1.1 图的定义"></a>7.1.1 图的定义</h3><p>​		图$G$由<strong>顶点集</strong>$V$和<strong>边集</strong>$E$组成，记为$G &#x3D; (V, E)$，其中$V(G)$表示图$G$中顶点的有限非空集；$E(G)$表示图G中顶点之间的关系（边）集合。若$V &#x3D; {v_{1}, v_{2}, … , v_{n}}$，则用$|V|$表示图$G$中顶点的个数，也称图$G$的阶，$E &#x3D; {(u, v) | u∈V, v∈V}$，用$|E|$表示图$G$中边的条数。</p>
<p>​		若图是有向图，则$&lt;v,w&gt;$表示<strong>从$v$到$w$的一条弧</strong>，且称$v$为<strong>弧尾</strong>，$w$为<strong>弧头</strong>。</p>
<p>​		在无向图中，顶点的<strong>度</strong>是指<strong>与其相关联的边的数目</strong>；</p>
<p>​		在有向图中，定义：</p>
<p>​				以顶点<code>v</code>为<strong>头</strong>的弧的数目称为<code>v</code>的<strong>入度</strong>(InDegree)，记作<code>ID(v)</code>，</p>
<p>​				以顶点<code>v</code>为<strong>尾</strong>的弧的数目称为<code>v</code>的<strong>出度</strong>(OutDegree)，记作<code>OD(v)</code>。</p>
<p>​		对于无向图，边的数目$e$的取值是$(0,\frac{1}{2} n(n-1))$（上界即$C_{n}^{2} $），有$\frac{1}{2} n(n-1)$条边的无向图称为<strong>完全图</strong>。</p>
<p>​		对于有向图，边的数目$e$的取值是$(0,n(n-1))$（上界即$P_{n}^{2} $，P即Permutation排列），有$n(n-1)$条边的有向图称为<strong>有向完全图</strong>。</p>
<p>​		有很少条边的图称为<strong>稀疏图</strong>(Sparse graph)，反之称为<strong>稠密图</strong>(Dense graph)。</p>
<p>​		序列中顶点不重复出现的路径称为<strong>简单路径</strong>；除了第一个顶点和最后一个顶点之外，其余顶点不重复出现的回路，称为<strong>简单回路</strong>或<strong>简单环</strong>(Cycle)。</p>
<blockquote>
<p>注：</p>
<p>线性表可以是空表，树可以是空树，但图不可以是空，即V一定是非空集；但图的边集可为空集。</p>
</blockquote>
<h3 id="7-1-2-强-连通图与连通子图"><a href="#7-1-2-强-连通图与连通子图" class="headerlink" title="7.1.2 (强)连通图与连通子图"></a>7.1.2 (强)连通图与连通子图</h3><p>在<strong>无向图</strong>$G$中，如果从顶点$v$到顶点$v^{‘}$有路径，则称$v$和$v^{‘}$是<strong>连通</strong>的。</p>
<p>在无向图中，若对于图中任意两个顶点$v_{i}、v_{j}\in V$，$v_{i}、v_{j}$都是连通的，则称**$G$是连通图**。</p>
<p>无向图中的<strong>极大连通子图</strong>称为<strong>连通分量</strong>（Connected <strong>Component</strong>）。（子图必须连通，且包含尽可能多的顶点和边，最小为1，最大为n）</p>
<blockquote>
<p>注：</p>
<p>若G是连通图，则最少有n-1条边；</p>
<p>无环连通图是树。</p>
</blockquote>
<p>在<strong>有向图</strong>$G$中，如果对于每一对$v_{i}、v_{j}\in V,v_{i}≠v_{j}$，从$v_{i}$到$v_{j}$和从$v_{j}$到$v_{i}$都存在路径，则称$G$是<strong>强连通图</strong>。</p>
<blockquote>
<p>若G是强连通图，则最少有n条边（形成<strong>回路</strong>）;</p>
<p>若G是非连通图，则最多有可能有$C_{n-1}^{2}$条边（抛开最后一个顶点，其余的连满）。</p>
</blockquote>
<p>有向图中的<strong>极大强连通子图</strong>称为<strong>强连通分量</strong>。（子图必须连通，且保留尽可能多的边）</p>
<p>设有两个图$G&#x3D;(V,E)$和$G’&#x3D;(V’,E’)$，若$V’$是$V$的子集，且$E’$是$E$的子集，则称$G’$是$G$的子图。</p>
<p>若有满足$V(G’)&#x3D;V(G)$的子图$G’$,则称其为$G$的<strong>生成子图</strong>。</p>
<p>连通图的<strong>生成树</strong>是包含图中全部顶点的一个<strong>极小连通子图</strong>。（边尽可能地少，但要保持连通）</p>
<p>边上带有权值的图称为<strong>带权图</strong>，也称<strong>网</strong>。</p>
<h2 id="7-2-图的存储"><a href="#7-2-图的存储" class="headerlink" title="7.2 图的存储"></a>7.2 图的存储</h2><p>图的存储方式很多，主要介绍以下几种方法：</p>
<ul>
<li><strong>邻接矩阵（稠密图）</strong></li>
<li><strong>邻接表（稀疏图）</strong></li>
<li><strong>邻接多重表（无向图）</strong></li>
<li><strong>十字链表（有向图）</strong></li>
</ul>
<p>除了上述方法外，还有用<strong>序偶</strong>来表示（共有$|V|$条序偶，插删、查找不方便，适用于稀疏图）等：</p>
<table>
<thead>
<tr>
<th align="center">$v_{i}$</th>
<th align="center">$v_{j}$</th>
</tr>
</thead>
<tbody><tr>
<td align="center">……</td>
<td align="center">……</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="7-2-1-邻接矩阵法"><a href="#7-2-1-邻接矩阵法" class="headerlink" title="7.2.1 邻接矩阵法"></a>7.2.1 邻接矩阵法</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    VertexType vexs<span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span> 				<span class="token comment">//顶点向量</span>
    <span class="token keyword">int</span> arcs<span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span> 		<span class="token comment">//邻接矩阵边表</span>
    <span class="token keyword">int</span> vexnum<span class="token punctuation">,</span> arcnum<span class="token punctuation">;</span> 							<span class="token comment">//图当前顶点数和弧数</span>
    GraphKind kind<span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span>MGraph<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220209230759663.png" alt="image-20220209230759663"></p>
<p>邻接矩阵的<strong>行</strong>为出边邻接点（<strong>弧尾</strong>），<strong>列</strong>为入边邻接点（<strong>弧头</strong>）。</p>
<p>无向图：第i个结点的度&#x3D;第i行（或第i列）的非零元素个数。</p>
<p>有向图：第i个结点的出度&#x3D;第i行的非零元素个数；</p>
<p>​			    第i个结点的入度&#x3D;第i列的非零元素个数；</p>
<p>​				第i个结点的度&#x3D;第i行、第i列的非零元素个数之和。</p>
<p>空间复杂度：$O\left( \left| n \right|^{2} \right)$,适合存储<strong>稠密图</strong>。</p>
<p>无向图的邻接矩阵是对称矩阵，可以压缩存储（只存储上三角区&#x2F;下三角区）。</p>
<p>$A^{n}$的元素$A^{n}[i][j]$等于由顶点i到顶点j的长度为n的路径的数目。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">CreateVDN</span><span class="token punctuation">(</span>MGraph <span class="token operator">&amp;</span>g<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>k<span class="token punctuation">;</span>
  	<span class="token keyword">float</span> w<span class="token punctuation">;</span>
 	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>g<span class="token punctuation">.</span>vernum<span class="token punctuation">,</span><span class="token operator">&amp;</span>g<span class="token punctuation">.</span>arcnum<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>g<span class="token punctuation">.</span>vernum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>      g<span class="token punctuation">.</span>vex<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>g<span class="token punctuation">.</span>vernum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    	<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>g<span class="token punctuation">.</span>vernum<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
     	  g<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span>INFINITY<span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>g<span class="token punctuation">.</span>arcnum<span class="token punctuation">;</span><span class="token operator">++</span>k<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%f"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>i<span class="token punctuation">,</span><span class="token operator">&amp;</span>j<span class="token punctuation">,</span><span class="token operator">&amp;</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
        g<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>w<span class="token punctuation">;</span>
        g<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>w<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> ok<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="7-2-2-邻接表"><a href="#7-2-2-邻接表" class="headerlink" title="7.2.2 邻接表"></a>7.2.2 邻接表</h3><p>带权则加一个<strong>域</strong>表示权值。对于有向图，分为<strong>入边表和出边表</strong>。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220504224341095.png" alt="image-20220504224341095"></p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220504224314824.png" alt="image-20220504224314824" style="zoom:67%;" />

<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX_VERTEX_NUM</span> <span class="token expression"><span class="token number">20</span></span></span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">ArcNode</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">int</span> adjvex<span class="token punctuation">;</span> 
  <span class="token keyword">struct</span> <span class="token class-name">ArcNode</span> <span class="token operator">*</span>nextarc<span class="token punctuation">;</span> 	<span class="token comment">//指向下一条弧的指针</span>
<span class="token punctuation">&#125;</span> ArcNode<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">VNode</span><span class="token punctuation">&#123;</span>
  VertexType data<span class="token punctuation">;</span> 
  ArcNode <span class="token operator">*</span>firstarc<span class="token punctuation">;</span> 		<span class="token comment">//指向第一条依附该顶点的弧的指针</span>
<span class="token punctuation">&#125;</span> VNode<span class="token punctuation">,</span> AdjList<span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
  AdjList vertices<span class="token punctuation">;</span>
  <span class="token keyword">int</span> vernum<span class="token punctuation">,</span> arcnum<span class="token punctuation">;</span> 
  <span class="token keyword">int</span> kind<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> ALGraph<span class="token punctuation">;</span>
<span class="token comment">//得到图的邻接表</span>
VNode <span class="token operator">*</span><span class="token function">creat_ALgraph</span><span class="token punctuation">(</span><span class="token keyword">int</span> e<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">,</span>k<span class="token punctuation">,</span>j<span class="token punctuation">;</span>
     VNode <span class="token operator">*</span>G<span class="token punctuation">;</span>
     ArcNode <span class="token operator">*</span>p<span class="token punctuation">;</span>
     <span class="token function">scanf</span><span class="token punctuation">(</span>“<span class="token operator">%</span>d<span class="token operator">%</span>d”<span class="token punctuation">,</span><span class="token operator">&amp;</span>g<span class="token punctuation">.</span>vernum<span class="token punctuation">,</span><span class="token operator">&amp;</span>g<span class="token punctuation">.</span>arcnum<span class="token punctuation">)</span><span class="token punctuation">;</span> 
     G<span class="token operator">=</span><span class="token punctuation">(</span>VNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>vernum<span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>VNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Input vertex:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>g<span class="token punctuation">.</span>vernum<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
     <span class="token punctuation">&#123;</span> 
         <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%c"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>G<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	 G<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>firstarc<span class="token operator">=</span><span class="token constant">NULL</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span>
	 <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>k<span class="token operator">&lt;</span>g<span class="token punctuation">.</span>arcnum<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>
     <span class="token punctuation">&#123;</span> 
         <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Input the i,j\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
         <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>i<span class="token punctuation">,</span><span class="token operator">&amp;</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
         p<span class="token operator">=</span><span class="token punctuation">(</span>ArcNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ArcNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         p<span class="token operator">-></span>adjvex<span class="token operator">=</span>j<span class="token punctuation">;</span>
         p<span class="token operator">-></span>nextarc<span class="token operator">=</span>G<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>firstarc<span class="token punctuation">;</span>
         G<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>firstarc<span class="token operator">=</span>p<span class="token punctuation">;</span>
         p<span class="token operator">=</span><span class="token punctuation">(</span>ArcNode <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ArcNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         p<span class="token operator">-></span>adjvex<span class="token operator">=</span>i<span class="token punctuation">;</span>
         p<span class="token operator">-></span>nextarc<span class="token operator">=</span>G<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>firstarc<span class="token punctuation">;</span>
         G<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>firstarc<span class="token operator">=</span>p<span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> G<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>无向图边结点的数量是$2|E|$（$E$表示边，$2|E|$即表示存在冗余存储）；</p>
<p>有向图的空间复杂度为$O\left( \left| V \right|+\left| E \right|\right)$。</p>
<h3 id="7-2-3-邻接多重表"><a href="#7-2-3-邻接多重表" class="headerlink" title="7.2.3 邻接多重表"></a>7.2.3 邻接多重表</h3><p>​		无向图的存储可以使用邻接表，但在实际使用时，如果想对图中某顶点进行实操（修改或删除），由于邻接表中存储该顶点的节点有两个，因此需要操作两个节点。为了提高在无向图中操作顶点的效率，引入适用于<strong>存储无向图</strong>的方法——<strong>邻接多重表</strong>。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220504233009690.png" alt="image-20220504233009690"></p>
<h3 id="7-2-4-十字链表"><a href="#7-2-4-十字链表" class="headerlink" title="7.2.4 十字链表"></a>7.2.4 十字链表</h3><p>用于存储<strong>有向图</strong>，其存储的空间复杂度为$O\left( \left| V \right|+\left| E \right|\right)$.</p>
<p><strong>边结点的结构</strong>：</p>
<table>
<thead>
<tr>
<th align="center">mark</th>
<th align="center">tailvex</th>
<th align="center">headvex</th>
<th align="center">tlink</th>
<th align="center">hlink</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&#x2F;</td>
<td align="center">尾域指示<strong>弧尾</strong>顶点的位置</td>
<td align="center">头域指示<strong>弧头</strong>顶点的位置</td>
<td align="center">链域指向<strong>弧尾</strong>相同的下一条弧</td>
<td align="center">链域指向<strong>弧头</strong>相同的下一条弧</td>
</tr>
</tbody></table>
<p><strong>顶点结点的结构</strong>：</p>
<table>
<thead>
<tr>
<th align="center">data</th>
<th align="center">Firstin</th>
<th align="center">Firstout</th>
</tr>
</thead>
<tbody><tr>
<td align="center">&#x2F;</td>
<td align="center">以该顶点为<strong>弧头</strong>的第一个弧结点</td>
<td align="center">以该顶点为<strong>弧尾</strong>的第一个弧结点</td>
</tr>
</tbody></table>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220505000924881.png" alt="image-20220505000924881"></p>
<p>存储结构通过定义边结点和顶点结点，然后定义十字链表下的图结构即可。</p>
<h2 id="7-3-图的遍历"><a href="#7-3-图的遍历" class="headerlink" title="7.3 图的遍历"></a>7.3 图的遍历</h2><h3 id="7-3-1-广度优先遍历-BFS"><a href="#7-3-1-广度优先遍历-BFS" class="headerlink" title="7.3.1 广度优先遍历(BFS)"></a>7.3.1 广度优先遍历(BFS)</h3><p>广度优先遍历类似于树的<strong>按层序遍历</strong>的过程。其要点如下：</p>
<p>（1）找到与一个顶点相邻的所有顶点；（2）标记哪些顶点被访问过；（3）需要一个<strong>辅助队列</strong><code>visited[M]</code>。</p>
<p><strong>邻接矩阵实现：</strong></p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">BFS</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span>k<span class="token punctuation">,</span>visited<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">// using adjmatrix,采用的方式为非递归遍历图g,需要采用辅助队列和访问标志数组visited</span>
    <span class="token function">setnull</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Enqueue</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">empty</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>		<span class="token comment">//队列不为空</span>
        i<span class="token operator">=</span><span class="token function">dequeue</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span>g<span class="token punctuation">.</span>vexs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>true<span class="token punctuation">;</span> 
        <span class="token keyword">for</span> <span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
            <span class="token punctuation">&#123;</span>
                <span class="token comment">//(i,j)->T,T代表的是图的广度优先生成树</span>
                <span class="token function">Enqueue</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">Traverse</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> visited<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token comment">//count++;  记录连通分量的数量</span>
            <span class="token function">BFS</span><span class="token punctuation">(</span>g<span class="token punctuation">,</span>i<span class="token punctuation">,</span>visited<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>邻接表实现：</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include&lt;iostream&gt;
#include&lt;queue&gt;
using namespace std;
#define NUMBER_VERTEX 5
&#x2F;&#x2F;边节点定义
typedef struct edgenode&#123;
	int index;
	edgenode *nextEdge;
&#125;edgeNode ,*peNode;
&#x2F;&#x2F;顶点节点定义
typedef struct vertexnode
&#123;
	char data;
	edgeNode *firstEdge;
&#125;vertexNode;
&#x2F;&#x2F;邻接表定义
&#x2F;&#x2F; typedef struct adjTable
&#x2F;&#x2F; &#123;
&#x2F;&#x2F; 	vertexNode adjGraph[NUMBER_VERTEX]; 
&#x2F;&#x2F;  int vertexNumber;
&#x2F;&#x2F;  int edgeNumber;
&#x2F;&#x2F; &#125;;
&#x2F;&#x2F;定义一个是否已经访问过的标志数组,0表示没访问过
int visited[NUMBER_VERTEX]&#x3D;&#123;0&#125;;  &#x2F;&#x2F;这里为了简化结构写成全局变量，也可把他作为结构体的一部分；
&#x2F;&#x2F;清空标志位visited;
void clearflag(void)&#123;
	for(int i&#x3D;0;i&lt;NUMBER_VERTEX;i++)&#123;
		visited[i]&#x3D;0;
	&#125;
&#125;
&#x2F;&#x2F;访问某个图的几号顶点
void visit(vertexNode *pVertex,int index)&#123;
	cout&lt;&lt;(pVertex+index)-&gt;data;
	visited[index]&#x3D;1;
&#125;
&#x2F;&#x2F;连通图的广度优先搜索
void bfs_connect(vertexNode *pVertex,int index)&#123;
	visit(pVertex,index);
	&#x2F;&#x2F;访问入口顶点
	queue&lt;int&gt; q; &#x2F;&#x2F;存储顶点的编号
	q.push(index);
	while(!q.empty())&#123;
		int cur &#x3D; q.front();
		q.pop();
		&#x2F;&#x2F;查找所有cur顶点的未被访问的邻接点
		peNode temp &#x3D; (pVertex+cur)-&gt;firstEdge;
		while(temp!&#x3D;NULL)&#123;
			int num_nextedge &#x3D; temp-&gt;index;
			if(visited[num_nextedge]&#x3D;&#x3D;0)&#123;
				visit(pVertex,num_nextedge);
				q.push(num_nextedge);
			&#125;
			temp &#x3D; temp-&gt;nextEdge;
		&#125;
	&#125;
&#125;
&#x2F;&#x2F;整个图的广度优先搜索
void bfs(vertexNode *pVertex,int index)&#123;
	bfs_connect(pVertex,index);
	&#x2F;&#x2F; 遍历每一个连通分量
	for(int i&#x3D;0;i&lt;NUMBER_VERTEX;i++)&#123;
		if(visited[i]&#x3D;&#x3D;0)&#123;
			bfs_connect(pVertex,i);
		&#125;
	&#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>邻接矩阵存储的图：</p>
<p>访问$\left| V \right|$个顶点需要$O\left( \middle| V \middle| \right)$的时间。查找每个顶点的邻接点都需要$O\left( \middle| V \middle| \right)$的时间，而总共有$\left| V \right|$个顶点，其时间复杂度&#x3D;$O\left( \left| V \right|^{2} \right)$。</p>
<p>邻接表存储的图：</p>
<p>访问$\left| V \right|$个顶点需要$O\left( \middle| V \middle| \right)$的时间。查找每个顶点的邻接点都需要$O\left( \middle| E \middle| \right)$的时间，其时间复杂度&#x3D;$O\left( \left| V \right| + \left| E \right| \right)$。</p>
<p>【注】其实对于⽆向图来说，查找每个顶点的邻接点都需要$O\left( 2\middle| E \middle| \right)$的时间。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220210234445998.png" alt="image-20220210234445998"></p>
<h3 id="7-3-2-深度优先遍历-DFS"><a href="#7-3-2-深度优先遍历-DFS" class="headerlink" title="7.3.2 深度优先遍历(DFS)"></a>7.3.2 深度优先遍历(DFS)</h3><p>基本思路：采用<strong>递归算法</strong>。</p>
<p>​		从图中某个顶点出发，访问此顶点，然后<strong>依次从其未被访问的邻接点出发深度优先遍历图</strong>，直至所有与其有路径相同的顶点都被访问到；若此时图中尚有顶点未被访问，则另选图中一个未被访问的顶点作为起始点，重复以上过程，直至图中所有顶点都被访问到为止。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">depthFirstSearch</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
   Label vertex v as reached
   <span class="token keyword">for</span> <span class="token punctuation">(</span>each unreached vertex u adjacent from v<span class="token punctuation">)</span>
      <span class="token function">depthFirstSearch</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>代码如下：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c">Boolean visited<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token function">Status</span> <span class="token punctuation">(</span><span class="token operator">*</span> VisitFunc<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//dfs using adjmatrix</span>
<span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
   <span class="token comment">//count++;  记录连通分量的数量</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"node:%c\n"</span><span class="token punctuation">,</span>g<span class="token punctuation">.</span>vexs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span> TRUE<span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">&#123;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">&#123;</span>
           <span class="token comment">//(i,j)->T,T代表的是图的深度优先生成树</span>
           <span class="token function">dfs</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span>
   <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//dfs using adjlist</span>
<span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"node:%c\t"</span><span class="token punctuation">,</span>gl<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>vertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    p<span class="token operator">=</span>gl<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token constant">NULL</span><span class="token punctuation">)</span>  
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>p<span class="token operator">-></span>adjvex<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>p<span class="token operator">-></span>adjvex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        p<span class="token operator">=</span>p<span class="token operator">-></span>next<span class="token punctuation">;</span><span class="token comment">//找下一邻接点</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>复杂度分析</strong>：</p>
<p>空间复杂度：来自函数调用栈，最坏情况，递归深度为$O\left( \middle| V \middle| \right)$.</p>
<p>时间复杂度与BFS是一样的，主要取决于使用哪种数据结构来存储图：</p>
<p>邻接矩阵存储的图：</p>
<p>访问$\left| V \right|$个顶点需要$O\left( \middle| V \middle| \right)$的时间。查找每个顶点的邻接点都需要$O\left( \middle| V \middle| \right)$的时间，而总共有$\left| V \right|$个顶点，其时间复杂度&#x3D;$O\left( \left| V \right|^{2} \right)$。</p>
<p>邻接表存储的图：</p>
<p>访问$\left| V \right|$个顶点需要$O\left( \middle| V \middle| \right)$的时间。查找每个顶点的邻接点都需要$O\left( \middle| E \middle| \right)$的时间，其时间复杂度&#x3D;$O\left( \left| V \right| + \left| E \right| \right)$。</p>
<h2 id="7-4-最小生成树"><a href="#7-4-最小生成树" class="headerlink" title="7.4 最小生成树"></a>7.4 最小生成树</h2><p>对于带权连通无向图 $G&#x3D;(V,E)$，生成树不同，每棵树的权（即树中所有边上的权值之和）也可能不同。设$R$为$G$的所有生成树的集合，若 $T$ 为 $R$ 中边的权值之和最小的生成树，则 $T$ 称为 $G$ 的<strong>最小生成树（MST）</strong>。</p>
<blockquote>
<p>生成树的一些概念：</p>
<ul>
<li><p>深度优先生成树与广度优先生成树（前面一节有讲怎么构成）</p>
</li>
<li><p><strong>生成森林</strong>：非连通图每个连通分量的生成树一起组成非连通图的集合叫做生成森林。</p>
</li>
</ul>
<p>[说明]</p>
<p>一个图可以有许多棵不同的生成树，所有生成树具有以下共同特点：</p>
<ul>
<li>生成树的顶点个数与图的顶点个数相同</li>
<li>生成树是图的极小连通子图</li>
<li>一个有 $n$ 个顶点的连通图的生成树有 <strong>$n-1$ 条边</strong></li>
<li>生成树中任意两个顶点间的路径是唯一的</li>
<li>在生成树中再加一条边必然形成回路</li>
<li>含 $n$ 个顶点 $n-1$ 条边的图不一定是生成树</li>
</ul>
</blockquote>
<p>最小生成树有以下<strong>重要性质</strong>：&#x3D;&#x3D;<strong>[注意红、蓝、紫的颜色标记]</strong>&#x3D;&#x3D;</p>
<p>假设$(u,v)$具有<strong>最小权</strong>，其中$u\in U[red],v\in V-U[blue]$，则必定$\exists MST; contains; (u,v)[purple]$。</p>
<p>下面的算法将用到这一性质。</p>
<h3 id="7-4-1-Prim算法"><a href="#7-4-1-Prim算法" class="headerlink" title="7.4.1 Prim算法"></a>7.4.1 Prim算法</h3><p>从某一个顶点开始构建生成树；每次将<strong>代价最小的新顶点</strong>纳入生成树，直到所有顶点都纳入为止。算法的步骤如下：</p>
<ul>
<li><p>Step 1: $x\in V$, $Let;A &#x3D; {x}, B &#x3D; V - {x}$</p>
</li>
<li><p>Step 2: Select $(u, v)\in E$, $u\in A, v\in B$  such that $(u, v)$ has <strong>the smallest weight</strong> between A and B</p>
</li>
<li><p>Step 3: $(u, v)$ is in the tree. $A &#x3D; A\cup {v}, B &#x3D; B - {v}$</p>
</li>
<li><p>Step 4: If $B &#x3D;\varnothing$, stop; otherwise, go to Step 2.</p>
</li>
</ul>
<p>其时间复杂度为$O\left( n^{2} \right)$（其中$n&#x3D;\left| V \right|$），适合用于<strong>边稠密图</strong>。</p>
<p><code>Red</code>、<code>Blue</code>点可用以下方式标记：</p>
<ul>
<li><code>Color Mark</code>  <code>O(n)</code></li>
<li><code>set</code> 集合        <code>O(n)</code></li>
<li><code>BitString</code> 位串</li>
</ul>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220211161514407.png" alt="image-20220211161514407" style="zoom: 80%;" />

<p><strong>代码实现</strong>：</p>
<p>有两个需要注意的变量：</p>
<ul>
<li><code>lowcost[v]</code></li>
<li><code>adjvex[v]</code>记录<strong>是哪里来的结点</strong></li>
</ul>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    VertexType adjvex<span class="token punctuation">;</span>
    VRType lowcost<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>closedge<span class="token punctuation">[</span>MAX_VERTEX_NUM<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//USING Matrix</span>
<span class="token comment">//closedge[k].lowcost=0 	//red point notation</span>
<span class="token keyword">void</span> <span class="token function">MiniSpanTree_Prim</span><span class="token punctuation">(</span>MGraph G<span class="token punctuation">,</span> VertexType u<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    k <span class="token operator">=</span> <span class="token function">LocateVex</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>								<span class="token comment">//u为开始结点</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">!=</span> k<span class="token punctuation">)</span>
            closedge<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> u<span class="token punctuation">,</span> G<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>adj <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    closedge<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>lowcost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 						<span class="token comment">// U＝&#123;u&#125;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        k <span class="token operator">=</span> <span class="token function">Minimum</span><span class="token punctuation">(</span>closedge<span class="token punctuation">)</span><span class="token punctuation">;</span>						<span class="token comment">//求出下一个结点</span>
        <span class="token function">printf</span><span class="token punctuation">(</span>closedge<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>adjvex<span class="token punctuation">,</span> G<span class="token punctuation">.</span>vexs<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//求出生成树的边</span>
        closedge<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>lowcost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 					<span class="token comment">//加入red point set</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>G<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>adj <span class="token operator">&lt;</span> closedge<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>lowcost <span class="token operator">&amp;&amp;</span> closedge<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>lowcost <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token comment">//新节点并入后重新表示蓝点的最短路径</span>
                closedge<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span> G<span class="token punctuation">.</span>vexs<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> G<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>adj <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220506231114501.png" alt="image-20220506231114501"></p>
<h3 id="7-4-2-Kruskal算法"><a href="#7-4-2-Kruskal算法" class="headerlink" title="7.4.2 Kruskal算法"></a>7.4.2 Kruskal算法</h3><p>每次选择一条<strong>权值最小的边</strong>，使这条边的两头连通（原先已经连通的就不选），直到所有结点都连通。</p>
<p>在这个算法中需要关注的问题是：</p>
<ul>
<li>一个点能否遍历到另一个点</li>
<li>两端点是否在<strong>连通分量</strong>（集合）中（该算法使用）——-&gt;<strong>避圈法</strong></li>
</ul>
<p>在该算法中运用到的是<strong>并查集</strong>（Union-Find Set，存在查找集合和合并集合），并查集使用<strong>树的双亲表示法</strong>。</p>
<p>作为“双亲”，初始双亲指向自己；双亲可以<strong>直接指向根</strong>（通过经历的边寻找），并即是一个树的根&#x3D;另一个树的根（双亲）。</p>
<p>在算法中，当<code>n-1</code>条边全部进入生成树中时则结束。算法的时间复杂度为 $O\left( \left| E \right|{log}\left| V \right| \right)$，适合用于<strong>边稀疏图</strong>。</p>
<h2 id="7-5-最短路径-SP-问题"><a href="#7-5-最短路径-SP-问题" class="headerlink" title="7.5 最短路径(SP)问题"></a>7.5 最短路径(SP)问题</h2><h3 id="7-5-1-BFS算法"><a href="#7-5-1-BFS算法" class="headerlink" title="7.5.1 BFS算法"></a>7.5.1 BFS算法</h3><p>只适用于<strong>不带权图</strong>。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">infinity</span> <span class="token expression"><span class="token number">1000000</span></span></span>
<span class="token comment">//求顶点u到其他顶点的最短路径</span>
<span class="token keyword">void</span> <span class="token function">BFS_MIN_Distance</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span> <span class="token keyword">int</span> u<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
	<span class="token comment">//d[i]表示从u到i结点的最短路径</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">&#123;</span>
		<span class="token comment">//d[i]表示从u到i结点的最短路径</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">&#123;</span>
			d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> infinity<span class="token punctuation">;</span>	<span class="token comment">//初始化路径长度</span>
			path<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>		<span class="token comment">//最短路径从哪个顶点过来</span>
		<span class="token punctuation">&#125;</span>
		d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		visited<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> TRUE<span class="token punctuation">;</span>
		<span class="token function">EnQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">)</span>		<span class="token comment">//BFS算法主过程</span>
		<span class="token punctuation">&#123;</span>
			<span class="token function">DeQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//队头元素出队</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>w <span class="token operator">=</span> <span class="token function">FirstNeighbor</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>w <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span>w <span class="token operator">=</span> <span class="token function">NextNeighbor</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> u<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">&#123;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span>		<span class="token comment">//w为u的尚未访问的邻接顶点</span>
				<span class="token punctuation">&#123;</span>
					d<span class="token punctuation">[</span>w<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//路径长度加1</span>
					path<span class="token punctuation">[</span>w<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>		<span class="token comment">//最短路径应从u到w</span>
					visited<span class="token punctuation">[</span>w<span class="token punctuation">]</span> <span class="token operator">=</span> TRUE<span class="token punctuation">;</span>  <span class="token comment">//设为已访问标记</span>
					<span class="token function">EnQueue</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//顶点w入队</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="7-5-2-Dijkstra算法"><a href="#7-5-2-Dijkstra算法" class="headerlink" title="7.5.2 Dijkstra算法"></a>7.5.2 Dijkstra算法</h3><p>算法求<strong>单个源点到其余各顶点</strong>的最短路径，计算思路是<strong>离源点最低路径长度的开序</strong>。——贪心算法（每次取离源点最近的点）</p>
<p>设<code>C</code>数组为<strong>蓝点集</strong>，起点为红点。当红点集合加入值时，关联的蓝点将更新<code>SP</code>[对比<code>Prim</code>算法，更新的判断式子不同]。执行以下操作：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//arcs[i,j]: the weight along path from i to j.  </span>
<span class="token comment">//Dist[k]: length of the shortest special path from source to k.</span>
<span class="token comment">//j in C : 	shortest path from source to j is not known. </span>
<span class="token comment">//k in S : shortest path from source to k is known.</span>
<span class="token function">Dijkstra</span> <span class="token punctuation">(</span>arcs<span class="token punctuation">[</span><span class="token number">1</span>…n<span class="token punctuation">,</span> <span class="token number">1</span>…n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> array <span class="token punctuation">[</span><span class="token number">2</span>…n<span class="token punctuation">]</span> 
array Dist <span class="token punctuation">[</span><span class="token number">2</span>…n<span class="token punctuation">]</span>
C <span class="token operator">&lt;</span><span class="token operator">-</span> <span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>…<span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span>
<span class="token keyword">for</span> i <span class="token operator">&lt;</span><span class="token operator">-</span> <span class="token number">2</span> to n <span class="token keyword">do</span> Dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">-</span> arcs<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span> 
repeat n <span class="token operator">-</span> <span class="token number">2</span> times 
     v <span class="token operator">&lt;</span><span class="token operator">-</span> some element of C minimizing Dist<span class="token punctuation">[</span>v<span class="token punctuation">]</span> 
     C <span class="token operator">&lt;</span><span class="token operator">-</span> C \ <span class="token punctuation">&#123;</span>v<span class="token punctuation">&#125;</span> 
     <span class="token keyword">for</span> each w in C <span class="token keyword">do</span> 
   		Dist<span class="token punctuation">[</span>w<span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">-</span> <span class="token function">min</span> <span class="token punctuation">(</span>Dist<span class="token punctuation">[</span>w<span class="token punctuation">]</span> <span class="token punctuation">,</span> Dist<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span> arcs<span class="token punctuation">[</span>v<span class="token punctuation">,</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> Dist<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220506233306251.png" alt="image-20220506233306251" style="zoom:50%;" />

<p><strong>算法实现代码</strong>如下：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">Shortpath</span><span class="token punctuation">(</span>cost<span class="token punctuation">,</span>v0<span class="token punctuation">,</span>dist<span class="token punctuation">)</span>  <span class="token comment">//cost数组记录邻接点的带权长度</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span> 
        dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> cost<span class="token punctuation">[</span>v0<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
     	s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>			 <span class="token comment">//设为蓝点</span>
        p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    s<span class="token punctuation">[</span>v0<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>				 <span class="token comment">//将起始顶点设为红点</span>
    <span class="token keyword">do</span> <span class="token punctuation">&#123;</span>
        wm <span class="token operator">=</span> Maxint<span class="token punctuation">;</span>		 <span class="token comment">//初值设为无穷大,该变量记录当前比较的最短路径</span>
        u <span class="token operator">=</span> v0<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>	 <span class="token comment">//是蓝点</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> wm<span class="token punctuation">)</span>
                <span class="token punctuation">&#123;</span>
                    u<span class="token operator">=</span> i<span class="token punctuation">;</span>
                    wm <span class="token operator">=</span> dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        s<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>				<span class="token comment">//将u设为红点</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token comment">//更新蓝点的最短路径</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>dist<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> cost<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">&#123;</span>
                    dist<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dist<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">+</span>cost<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        			p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>			<span class="token comment">//用p数组记录经过的红点</span>
                <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
		num<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">while</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>path数组可以通过记录经过的红点，<strong>可以读取源点0到终点v的最短路径</strong>。以下表中的顶点4为例：</p>
<p>path[4] &#x3D; 2 → path[2] &#x3D; 3 →path[3] &#x3D; 0，反过来排列，得到路径0, 3, 2, 4，这就是源点0到终点4的最短路径。</p>
</blockquote>
<p><strong>Dijkstra算法中各辅助数组的变化</strong>：</p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220506234052550.png" alt="image-20220506234052550" style="zoom: 50%;" />

<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220506234043551.png" alt="image-20220506234043551"></p>
<p>Dijkstra算法的时间复杂度：</p>
<ul>
<li><p>对于邻接矩阵表示，为$O\left( n^{2} \right)$（其中$n&#x3D;\left| V \right|$）；</p>
</li>
<li><p>对于邻接表表示，为$O\left( n+|E|\right)$（其中$n&#x3D;\left| V \right|$，$|E|$为边数[结点的度的加和]）。</p>
</li>
</ul>
<blockquote>
<p>注：</p>
<ul>
<li>若要用Dijkstra算法求每一对顶点之间的最短路径，则再加入一个<code>for</code>循环即可，算法的时间复杂度为$O\left( n^{3} \right)$；</li>
<li>当图中含<strong>负权边</strong>时算法不一定获得正确结果。</li>
</ul>
</blockquote>
<h3 id="7-5-3-Floyd算法"><a href="#7-5-3-Floyd算法" class="headerlink" title="7.5.3 Floyd算法"></a>7.5.3 Floyd算法</h3><p>Floyd算法求每一对顶点之间的最短路径的时间复杂度也为$O\left( n^{3} \right)$，但算法形式比Dijkstra算法要简单。</p>
<blockquote>
<p>Floyd算法是在研究传递闭包问题时设计的。</p>
</blockquote>
<p>求出每一对顶点之间的最短路径。使用<strong>动态规划</strong>思想：</p>
<p>将顶点的集合设为<strong>n个点序列</strong>，<code>k</code>从起始位置到结束位置依次遍历，计算<code>Dist[i,j]=min(Dist[i,j],Dist[i,k]+Dist[k,j])</code>。</p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220507002216752.png" alt="image-20220507002216752" style="zoom:67%;" />

<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">ShortestPath_FLOYD</span><span class="token punctuation">(</span>MGraph G<span class="token punctuation">,</span>PathMatrix <span class="token operator">&amp;</span>path<span class="token punctuation">,</span>DistancMatrix <span class="token operator">&amp;</span>d<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> G<span class="token punctuation">.</span>arcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>			<span class="token comment">//将初始邻接矩阵的距离赋值给d数组</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span> i <span class="token operator">&lt;</span><span class="token operator">></span> j <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> MAXINT <span class="token punctuation">)</span> 
                path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>	    		<span class="token comment">// i到j有路径,记录经过的红点(该怎么走)	</span>
            <span class="token keyword">else</span> path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>			<span class="token comment">// i到j无路径	</span>
        <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> k<span class="token operator">++</span> <span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 		<span class="token comment">//下图矩阵的第k行第k列</span>
                    d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> d<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> path<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>      						<span class="token comment">//缩短路径长度, 绕过k到j </span>
    <span class="token punctuation">&#125;</span>    
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220507003849393.png" alt="image-20220507003849393"></p>
<p>对于<code>a[1][0] = 11</code>, path数组有：<code>path[1][0] = 2，path[1][2] = 3，path [1][3] = 1</code>，则：</p>
<p><strong>最短路径</strong>为：vertex 0 &lt;- vertex 2 &lt;- vertex 3 &lt;- vertex 1，即**&lt;1, 3&gt;,&lt;3, 2&gt;,&lt;2, 0&gt;**。</p>
<p>Floyd算法的时间复杂度为$O\left( \left| V \right|^{3} \right)$，空间复杂度为$O\left( \left| V \right|^{2} \right)$。其可以用于“<strong>负权值</strong>”的图，但不能解决带有“负回路“的图（有负权值的边组成回路），这种图有可能没有最短路径。</p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220211223812977.png" alt="image-20220211223812977" style="zoom: 50%;" />

<h2 id="7-6-AOV网与拓扑排序"><a href="#7-6-AOV网与拓扑排序" class="headerlink" title="7.6 AOV网与拓扑排序"></a>7.6 AOV网与拓扑排序</h2><h3 id="7-6-1-基本概念"><a href="#7-6-1-基本概念" class="headerlink" title="7.6.1 基本概念"></a>7.6.1 基本概念</h3><p>​		若一个有向图中不存在环，则称为<strong>有向无环图</strong>，简称<strong>DAG图</strong>（<strong>D</strong>irected <strong>A</strong>cyclic <strong>G</strong>raph）。</p>
<p>​		可以用有向图表示一个工程。在这种有向图中，用<strong>顶点</strong>表示活动，用有向边$&lt;V_{i},V_{j}&gt;$表示活动$V_{i}$必须先于活动$V_{j}$进行。这种有向图叫做顶点表示活动的<strong>AOV网络</strong> （<strong>A</strong>ctivity <strong>O</strong>n <strong>V</strong>ertices）。</p>
<p>​		拓扑排序是由某个集合上的一个<strong>偏序</strong>得到该集合上的一个<strong>线序</strong>（全序）的排序。</p>
<ul>
<li>一个DAG的拓扑序列通常表示某种方案切实可行</li>
<li>一个DAG可能有多个拓扑序列</li>
</ul>
<blockquote>
<p>注：</p>
<p>[1]线序意即：要么xRy，要么yRx。</p>
<p>[2]在图论中，由一个有向无环图的顶点组成的序列，当且仅当满足下列条件时，称为该图的一个拓扑排序：</p>
<ul>
<li><p>每个顶点出现且只出现一次；</p>
</li>
<li><p>若顶点A在序列中排在顶点B的前面，则在图中不存在从顶点B到顶点A的路径。</p>
</li>
</ul>
</blockquote>
<h3 id="7-6-2-拓扑排序的实现"><a href="#7-6-2-拓扑排序的实现" class="headerlink" title="7.6.2 拓扑排序的实现"></a>7.6.2 拓扑排序的实现</h3><p>（1）从AOV网中选择一个<strong>没有前驱（入度为0）的顶点</strong>并输出；</p>
<p>（2）从网中删除该顶点和<strong>所有以它为尾的弧</strong>；</p>
<p>（3）重复（1）和（2）直到当前的AOV网为空或当前网中不存在无前驱的顶点为止（即<strong>有向图中存在环</strong>）。</p>
<p><strong>入度</strong>可以同通过在<strong>邻接表</strong>的表头结点增加一个ID域，记录入度，或创建一个ID数组。</p>
<p>为了避免重复检测入度为0的顶点，可用<strong>栈</strong>暂存所有入度为0的顶点（也可以使用<strong>队列</strong>）。栈的构造方式可以是独立的辅助栈，表示如后面的图所示，也可以是ID域栈（<strong>静态链栈</strong>）。方法是：</p>
<p>设一个栈顶位置的指针，将所有未处理过的入度为0的结点连接起来，形成一个链栈；栈初始化时将top指针赋为-1，表示该栈为空栈。</p>
<p>将顶点i进栈时，使用<strong>头插法</strong>，执行以下指针的修改：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//id相当于后继next,将入度为0的顶点链起来</span>
dig<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">=</span> top<span class="token punctuation">;</span>
top <span class="token operator">=</span> i<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>退栈操作，使用<strong>头删法</strong>，可以写成：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">//位于栈顶的顶点位置记于j,top退到次栈顶</span>
j <span class="token operator">=</span> top<span class="token punctuation">;</span>
top <span class="token operator">=</span> dig<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>使用Queue暂存的排序方式称为<strong>广度拓扑排序</strong>，使用Stack暂存的排序方式称为<strong>深度拓扑排序</strong>。</p>
</blockquote>
<p>独立的辅助栈表示如下：</p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220212151906421.png" alt="image-20220212151906421" style="zoom:67%;" />

<p>&#x3D;&#x3D;<strong>静态链栈的代码实现</strong>&#x3D;&#x3D;如下：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> datatype<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">int</span> vextype<span class="token punctuation">;</span>
<span class="token keyword">typedef</span>  <span class="token keyword">struct</span>  <span class="token class-name">node</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">int</span>  adjvex<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token operator">*</span> next<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> edgenode<span class="token punctuation">;</span>
<span class="token keyword">typedef</span>  <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    vextype  vertex<span class="token punctuation">;</span>
    <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    edgenode<span class="token operator">*</span> link<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> vexnode<span class="token punctuation">;</span>
vexnode  dig<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>		<span class="token comment">// Directed Graph(有向图)</span>

<span class="token keyword">void</span> <span class="token function">Topsort</span><span class="token punctuation">(</span>dig<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    top <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dig<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            dig<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">=</span> top<span class="token punctuation">;</span>
            top <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>top <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        j <span class="token operator">=</span> top<span class="token punctuation">;</span>				<span class="token comment">// 出栈,接下来对其有关的顶点入度进行操作</span>
        top <span class="token operator">=</span> dig<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span>		 <span class="token comment">// 栈顶指针指向次栈顶的顶点</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\t"</span><span class="token punctuation">,</span>dig<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>vertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        count <span class="token operator">++</span><span class="token punctuation">;</span>				<span class="token comment">// 代表有多少顶点进行了拓扑排序,对输出顶点进行计数</span>
        p <span class="token operator">=</span> dig<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            k <span class="token operator">=</span> p<span class="token operator">-></span>adjvex<span class="token punctuation">;</span>		<span class="token comment">// 邻接点的数字信息</span>
            dig<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>dig<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#123;</span>
                dig<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">=</span> top<span class="token punctuation">;</span>
                top <span class="token operator">=</span> k<span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            p <span class="token operator">=</span> p<span class="token operator">-></span>next<span class="token punctuation">;</span>		<span class="token comment">// 对下一个邻接点进行操作</span>
        <span class="token punctuation">&#125;</span>	<span class="token comment">// while p</span>
    <span class="token punctuation">&#125;</span>  		<span class="token comment">// while top</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> n<span class="token punctuation">)</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"has a cycle!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 该有向图有回路</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>其时间复杂度为$O\left( \left| V \right| + \left| E \right| \right)$；若采用邻接矩阵，则需$O\left( \left| V \right|^{2} \right)$。</p>
<h3 id="7-6-3-逆拓扑排序的实现"><a href="#7-6-3-逆拓扑排序的实现" class="headerlink" title="*7.6.3 逆拓扑排序的实现"></a>*7.6.3 逆拓扑排序的实现</h3><p>利用DFS算法实现，在顶点<strong>退栈</strong>前输出。</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">DFSTraverse</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">)</span>		<span class="token comment">// 对图G进行深度优先遍历</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>v<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>v<span class="token operator">&lt;</span>G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span>v<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">=</span>FALSE<span class="token punctuation">;</span>		<span class="token comment">// 初始化已访问标记数据</span>
	<span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>v<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>v<span class="token operator">&lt;</span>G<span class="token punctuation">.</span>vexnum<span class="token punctuation">;</span>v<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token function">DFS</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">void</span> <span class="token function">DFS</span><span class="token punctuation">(</span>Graph G<span class="token punctuation">,</span><span class="token keyword">int</span> v<span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">// 从顶点v出发，深度优先遍历图G</span>
    visited<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token operator">=</span>TRUE<span class="token punctuation">;</span>			<span class="token comment">// 设已访问标记</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>w<span class="token operator">=</span><span class="token function">FirstNeighbor</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>w<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span>x<span class="token operator">=</span><span class="token function">NextNeighbor</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span>v<span class="token punctuation">,</span>w<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">)</span>			<span class="token comment">// w为u的尚未访问的邻接顶点</span>
            <span class="token function">DFS</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">// 输出顶点</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="7-7-AOE网与关键路径"><a href="#7-7-AOE网与关键路径" class="headerlink" title="7.7 AOE网与关键路径"></a>7.7 AOE网与关键路径</h2><h3 id="7-7-1-AOE网"><a href="#7-7-1-AOE网" class="headerlink" title="7.7.1 AOE网"></a>7.7.1 AOE网</h3><p>在带权有向图中，<strong>以顶点表示事件，以有向边表示活动，以边上的权值表示完成该活动的开销</strong>（如完成活动所需的时间），称之为用边表示活动的网络，简称<strong>AOE网</strong>（<strong>A</strong>ctivity <strong>O</strong>n <strong>E</strong>dge NetWork）。</p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220212155703172.png" alt="image-20220212155703172" style="zoom:80%;" />

<p>AOE网具有以下两个性质：</p>
<p>（1）只有在某顶点所代表的事件发生后，从该顶点出发的各有向边所代表的活动才能开始；</p>
<p>（2）只有在进入某顶点的各有向边所代表的活动都已结束时，该顶点所代表的事件才能发生。</p>
<p>另外，有些活动可以并行进行。</p>
<p>在AOE网中仅有一个<strong>入度为0</strong>的顶点，称为<strong>开始顶点（源点）</strong>，它表示整个工程的开始；</p>
<p>也仅有一个出度为0的顶点，称为<strong>结束顶点（汇点）</strong>，它表示整个工程的结束。</p>
<h3 id="7-7-2-关键路径概述"><a href="#7-7-2-关键路径概述" class="headerlink" title="7.7.2 关键路径概述"></a>7.7.2 关键路径概述</h3><p>定义：从源点到汇点的有向路径可能有多条，所有路径中，具有最大路径长度的路径称为<strong>关键路径</strong>，而把关键路径上的活动称为<strong>关键活动</strong>。</p>
<p>完成整个工程的最短时间就是关键路径的长度。若关键活动不能按时完成，则整个工程的完成时间就会延长。</p>
<p><img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220212162705149.png" alt="image-20220212162705149"></p>
<ul>
<li><p>事件$v_{k}$的最早发生时间<code>ve(k)</code>——假设开始点是$v_{1}$，则从$v_{1}$到$v_{i}$的<strong>最长路径长度</strong>称为其最早开始时间，决定了所有从$v_{k}$开始的活动能够开工的最早时间</p>
</li>
<li><p>活动$a_{i}$的最早开始时间<code>e(i)</code>——指该活动弧的起点所表示的事件的最早发⽣时间</p>
</li>
<li><p>事件$v_{k}$的最迟发生时间<code>vl(k)</code>——它是指在不推迟整个工程完成的前提下，该事件最迟必须发⽣的时间</p>
</li>
<li><p>活动$a_{i}$的最迟开始时间<code>l(i)</code>——它是指该活动弧的终点所表示事件的最迟发生时间与该活动所需时间之差</p>
</li>
<li><p>活动$a_{i}$的时间余量<code>d(i)=l(i)-e(i)</code>，表示在不增加完成整个⼯程所需总时间的情况下，活动$a_{i}$可以拖延的时间</p>
</li>
</ul>
<p>若⼀个活动的时间余量为零，则说明该活动必须要如期完成，<code>d(i)=0</code>即&#x3D;&#x3D;<strong><code>l(i) = e(i)</code>的活动是关键活动</strong>&#x3D;&#x3D;；关键活动确定后，路径上的获得都是关键活动的路径就是关键路径。</p>
<h3 id="7-7-3-求关键路径"><a href="#7-7-3-求关键路径" class="headerlink" title="7.7.3 求关键路径"></a>7.7.3 求关键路径</h3><ul>
<li><strong>求<code>Ve(i)</code><strong>：事件的最早发生时间——</strong>&#x3D;&#x3D;拓扑排序&#x3D;&#x3D;可以得到</strong></li>
</ul>
<p>$v_{e}(k)&#x3D;\left{\begin{array}{ll}<br>0 &amp; (k&#x3D;1) \<br>\max \left{v_{e}(j)+weight\left(&lt;v_{j}, v_{k}&gt;\right}\right. &amp; \left(&lt;v_{j}, v_{k}&gt;\in p(k))\right.<br>\end{array}\right.$</p>
<p>其中$p(k)$表示所有到达$v_{k}$的有向边的集合，$weight(&lt;v_{j},v_{k}&gt;)$为有向边$&lt;v_{j},v_{k}&gt;$上的权值。</p>
<ul>
<li><strong>求<code>Vl(j)</code><strong>：事件的最迟发生时间——</strong>&#x3D;&#x3D;逆拓扑排序&#x3D;&#x3D;可以得到</strong></li>
</ul>
<p>$v_{l}(k)&#x3D;\left{\begin{array}{ll}<br>v_{e}(n) &amp; (k&#x3D;n) \<br>\min \left{v_{l}(j)-weight\left(&lt;v_{k}, v_{j}&gt;\right}\right. &amp; \left(&lt;v_{k}, v_{k}&gt;\in s(k))\right.<br>\end{array}\right.$</p>
<p>其中$s(k)$为所有从$v(k)$发出的有向边的集合。</p>
<ul>
<li>**求<code>e(i)</code>**：活动的最早开始时间</li>
</ul>
<p>若活动$a_{i}$是由弧$&lt;v_{k},v_{j}&gt;$表示的，则只有事件$v_{k}$发生了，活动$a_{i}$才能开始，则活动$a_{i}$的最早开始时间应等于事件$v_{k}$的最早开始时间，即：$e(i)&#x3D;v_{e}(k)$。</p>
<ul>
<li>**求<code>l(i)</code>**：活动的最迟开始时间</li>
</ul>
<p>活动$a_{i}$的最晚开始时间是指在不推迟整个工程完成日期的前提下，必须开始的最晚时间。若由弧$&lt;v_{k},v_{j}&gt;$表示，则$a_{i}$的最晚开始时间要保证事件$v_{j}$的最迟发生时间不拖后，则有：$l(i)&#x3D;v_{l}(j)-weight(&lt;v_{k},v_{j}&gt;)$。</p>
<ul>
<li><strong>计算<code>l(i)-e(i)</code></strong></li>
</ul>
<p><code>l(i)-e(i)</code>称为活动的<strong>时间余量</strong>；若$l(i) &#x3D; e(i)$，则该活动为关键活动。</p>
<img src="https://qianzeshu.oss-cn-hangzhou.aliyuncs.com/img/image-20220511000138742.png" alt="image-20220511000138742" style="zoom:50%;" />

<p>关键路径代码求解如下：</p>
<pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">CriticalPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//在此算法中需要对邻接表中单链表的结点加以修改, 在各结点中增加一个int域cost, 记录该结点所表示的边上的权值。</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> Ve<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        p <span class="token operator">=</span> NodeTable<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>firstadj<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            k <span class="token operator">=</span> p<span class="token operator">-></span>adjvex<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Ve<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> p<span class="token operator">-></span>cost <span class="token operator">></span> Ve<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
                Ve<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> Ve<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> p<span class="token operator">-></span>cost<span class="token punctuation">;</span>
            p <span class="token operator">=</span> p<span class="token operator">-></span>nextadj<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        Vl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Ve<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        p <span class="token operator">=</span> NodeTable<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>firstadj<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            k <span class="token operator">=</span> p<span class="token operator">-></span>adjvex<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Vl<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span> p<span class="token operator">-></span>cost <span class="token operator">&lt;</span> Vl<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                Vl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Vl<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span> p<span class="token operator">-></span>cost<span class="token punctuation">;</span>
            p <span class="token operator">=</span> p<span class="token operator">-></span>nextadj<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        p <span class="token operator">=</span> NodeTable<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>adj<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            k <span class="token operator">=</span> p<span class="token operator">-></span>adjvex<span class="token punctuation">;</span>
            e <span class="token operator">=</span> Ve<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  l <span class="token operator">=</span> Vl<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span> p<span class="token operator">-></span>cost<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> e<span class="token punctuation">)</span>			<span class="token comment">//输出&lt;i, k>是关键活动</span>
            	p <span class="token operator">=</span> p<span class="token operator">-></span>link<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>​		在拓扑排序求<code>Ve(i)</code>和逆拓扑有序求<code>Vl(i)</code>时, 所需时间为$O(n+e)$,  求各个活动的<code>e(k)</code>和<code>l(k)</code>时所需时间为$O(e)$, 则算法的时间复杂度仍然是$O(n+e)$。</p>

                                    
                            </div>
                            <hr />

                            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">ShiQuLiZhi</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://sxhthreo.github.io/2022/08/23/ds-algorithm/shu-ju-jie-gou-02-shu-ju-jie-gou-2/">https://sxhthreo.github.io/2022/08/23/ds-algorithm/shu-ju-jie-gou-02-shu-ju-jie-gou-2/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">ShiQuLiZhi</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



                                <div class="tag_share" style="display: block;">
                                    <div class="post-meta__tag-list" style="display: inline-block;">
                                        
                                            <div class="article-tag">
                                                
                                                    <a href="/tags/%E7%AE%97%E6%B3%95/">
                                                        <span class="chip bg-color">
                                                            算法
                                                        </span>
                                                    </a>
                                                    
                                                    <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                                                        <span class="chip bg-color">
                                                            数据结构
                                                        </span>
                                                    </a>
                                                    
                                            </div>
                                            
                                    </div>
                                    <div class="post_share"
                                        style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                                        <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                                    </div>
                                </div>
                                
                        </div>
    </div>

    

                

                            

                                        

                                                    
                                                        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table,
    th,
    td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table,
    th,
    td {
        border: 0;
    }

    table tr:nth-child(2n),
    thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked),
    [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table,
    th,
    td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n),
    thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked),
    [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling"
        style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="https://unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: '8SzvSoQjCOrTadqpJ1LjqujD-9Nh9j0Va',
        appKey: 'iv4mV6VBG7twuE7yQgwpsYaq',
        notify: '' === 'true',
        verify: '' === 'true',
        visitor: '' === 'true',
        avatar: '/medias/moren.png',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '快来评论区发表你的观点吧~ 听说昵称填写qq号可以显示qq头像和qq昵称哦!',
        enableQQ: true,
        boolean: true,
        emojiCDN: '//i0.hdslb.com/bfs/emote/',
        // 表情title和图片映射
        emojiMaps: {
            "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
            "tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
            "tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
            "tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
            "tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
            "tv_发怒": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
            "tv_发财": "34db290afd2963723c6eb3c4560667db7253a21a.png",
            "tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
            "tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png",
            "tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
            "tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
            "tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
            "tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
            "tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
            "tv_大哭": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
            "tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
            "tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
            "tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
            "tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
            "tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
            "tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
            "tv_打脸": "56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
            "tv_抓狂": "fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
            "tv_抠鼻": "c666f55e88d471e51bbd9fab9bb308110824a6eb.png",
            "tv_斜眼笑": "911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
            "tv_无奈": "ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
            "tv_晕": "5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
            "tv_流汗": "cead1c351ab8d79e9f369605beb90148db0fbed3.png",
            "tv_流泪": "7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
            "tv_流鼻血": "c32d39db2737f89b904ca32700d140a9241b0767.png",
            "tv_点赞": "f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
            "tv_生气": "26702dcafdab5e8225b43ffd23c94ac1ff932654.png",
            "tv_生病": "8b0ec90e6b86771092a498c54f09fc94621c1900.png",
            "tv_疑问": "0793d949b18d7be716078349c202c15ff166f314.png",
            "tv_白眼": "c1d59f439e379ee50eef488bcb5e5378e5044ea4.png",
            "tv_皱眉": "72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
            "tv_目瞪口呆": "0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
            "tv_睡着": "8b196675b53af58264f383c50ad0945048290b33.png",
            "tv_笑哭": "1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
            "tv_腼腆": "89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
            "tv_色": "61822c7e9aae5da76475e7892534545336b23a6f.png",
            "tv_调侃": "4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
            "tv_调皮": "b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png",
            "tv_鄙视": "6e72339f346a692a495b123174b49e4e8e781303.png",
            "tv_闭嘴": "c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
            "tv_难过": "87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
            "tv_馋": "fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
            "tv_鬼脸": "0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
            "tv_黑人问号": "45821a01f51bc867da9edbaa2e070410819a95b2.png",
            "tv_鼓掌": "1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png"
        },
        requiredFields: ['nick'], //设置必填项
    });
</script>
                                                            

                                                                

                                                                            

                                                                                        

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/08/23/ds-algorithm/shu-ju-jie-gou-03-shu-ju-jie-gou-3/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="数据结构3:查找与排序">
                        
                        <span class="card-title">数据结构3:查找与排序</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-08-23
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E8%AF%BE%E7%A8%8B/" class="post-category">
                                    数据结构与算法课程
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%AE%97%E6%B3%95/">
                        <span class="chip bg-color">算法</span>
                    </a>
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                        <span class="chip bg-color">数据结构</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/08/23/ds-algorithm/shu-ju-jie-gou-01-shu-ju-jie-gou-1/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="数据结构1:线性表,栈,队列,字符串,广义表,数组">
                        
                        <span class="card-title">数据结构1:线性表,栈,队列,字符串,广义表,数组</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-08-23
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E8%AF%BE%E7%A8%8B/" class="post-category">
                                    数据结构与算法课程
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%AE%97%E6%B3%95/">
                        <span class="chip bg-color">算法</span>
                    </a>
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                        <span class="chip bg-color">数据结构</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


    <script>
        $('#articleContent').on('copy', function (e) {
            // IE8 or earlier browser is 'undefined'
            if (typeof window.getSelection === 'undefined') return;

            var selection = window.getSelection();
            // if the selection is short let's not annoy our users.
            if (('' + selection).length < Number.parseInt('150')) {
                return;
            }

            // create a div outside of the visible area and fill it with the selected text.
            var bodyElement = document.getElementsByTagName('body')[0];
            var newdiv = document.createElement('div');
            newdiv.style.position = 'absolute';
            newdiv.style.left = '-99999px';
            bodyElement.appendChild(newdiv);
            newdiv.appendChild(selection.getRangeAt(0).cloneContents());

            // we need a <pre> tag workaround.
            // otherwise the text inside "pre" loses all the line breaks!
            if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
                newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
            }

            var url = document.location.href;
            newdiv.innerHTML += '<br />'
                + '来源: ShiQuLiZhi BLOG<br />'
                + '文章作者: ShiQuLiZhi<br />'
                + '文章链接: <a href="' + url + '">' + url + '</a><br />'
                + '本文著作权归作者所有，任何形式的转载均请注明出处。';

            selection.selectAllChildren(newdiv);
            window.setTimeout(function () { bodyElement.removeChild(newdiv); }, 200);
        });
    </script>
    

        <!-- 代码块功能依赖 -->
        <script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

        <!-- 代码语言 -->
        
            <script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>
            

                <!-- 代码块复制 -->
                
                    <script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
                    

                        <!-- 代码块收缩 -->
                        
                            <script type="text/javascript"
                                src="/libs/codeBlock/codeShrink.js"></script>
                            

                                <!-- 代码块折行 -->
                                
    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('1'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src=""></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



                            <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022-2023</span>
            
            <span id="year">2022</span>
            <a href="/about" target="_blank">ShiQuLiZhi</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">426.7k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2022";
                    var startMonth = "8";
                    var startDate = "13";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/sxhthreo" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub"
        data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>
    

        
            <a href="mailto:951161604@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我"
                data-position="top" data-delay="50">
                <i class="fas fa-envelope-open"></i>
            </a>
            

                

                        

                                
                                    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=951161604"
                                        class="tooltipped" target="_blank"
                                        data-tooltip="QQ联系我: 951161604" data-position="top"
                                        data-delay="50">
                                        <i class="fab fa-qq"></i>
                                    </a>
                                    

                                        

                                                
                                                    <a href="https://www.zhihu.com/people/shui-he-qing-chi-zi-14" class="tooltipped"
                                                        target="_blank"
                                                        data-tooltip="关注我的知乎: https://www.zhihu.com/people/shui-he-qing-chi-zi-14"
                                                        data-position="top" data-delay="50">
                                                        <i class="fab fa-zhihu1">知</i>
                                                    </a>
                                                    

                                                        

                                                                
                                                                    <a href="https://blog.csdn.net/sxH3O?type=blog"
                                                                        class="tooltipped" target="_blank"
                                                                        data-tooltip="关注我的CSDN: https://blog.csdn.net/sxH3O?type=blog"
                                                                        data-position="top" data-delay="50">
                                                                        <i class="fab fa-csdn">C</i>
                                                                    </a>
                                                                    </div>
    </div>
</footer>

<div class="progress-bar"></div>


                                <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

                                    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


                                        <script
                                            src="/libs/materialize/materialize.min.js"></script>
                                        <script
                                            src="/libs/masonry/masonry.pkgd.min.js"></script>
                                        <script
                                            src="/libs/aos/aos.js"></script>
                                        <script
                                            src="/libs/scrollprogress/scrollProgress.min.js"></script>
                                        <script
                                            src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
                                        <script
                                            src="/js/matery.js"></script>

                                        <!-- Baidu Analytics -->

                                            <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

                                                
                                                    <script
                                                        src="/libs/others/clicklove.js"
                                                        async="async"></script>
                                                    
                                                        
                                                            <script async
                                                                src="/libs/others/busuanzi.pure.mini.js"></script>
                                                            

                                                                

                                                                        

                                                                                
                                                                                        
                                                                                            <script
                                                                                                type="text/javascript"
                                                                                                color="0,0,255"
                                                                                                pointColor="0,0,255"
                                                                                                opacity='0.7'
                                                                                                zIndex="-1"
                                                                                                count="99"
                                                                                                src="/libs/background/canvas-nest.js"></script>
                                                                                            

                                                                                                

                                                                                                            
                                                                                                                <script
                                                                                                                    type="text/javascript"
                                                                                                                    src="/libs/background/ribbon-dynamic.js"
                                                                                                                    async="async"></script>
                                                                                                                

                                                                                                                    
                                                                                                                        <script
                                                                                                                            src="/libs/instantpage/instantpage.js"
                                                                                                                            type="module"></script>
                                                                                                                        




                <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>

</html>